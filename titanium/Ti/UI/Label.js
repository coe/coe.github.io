define(["Ti/_/declare","Ti/_/UI/FontWidget","Ti/_/dom","Ti/_/css","Ti/_/style","Ti/_/lang","Ti/Locale","Ti/UI"],function(e,t,i,r,o,n,a,s){var l=o.set,u=i.unitize,d=2,c={post:"_setText"};return e("Ti.UI.Label",t,{constructor:function(){this._add(this._textContainer=s.createView({width:s.INHERIT,height:s.SIZE,center:{y:"50%"}}));var e=this,t=this._textContainerDomNode=this._textContainer.domNode;e._textContainer._getContentSize=function(i){var r=e._textContainerDomNode.innerHTML,o=e._measureText(r,t,e._hasSizeWidth()?void 0:i);return{width:o.width,height:o.height}},this._addStyleableDomNode(t),l(t,"overflow","visible"),this.wordWrap=!0},_defaultWidth:s.SIZE,_defaultHeight:s.SIZE,_getText:function(){var e,t,i=0,r=0,o=a._getString(this.textid,this.text);if(void 0===o)return"";for(o+="";r<o.length;)if("	"===o[r]){var n="",s=d-t%d;for(e=0;s>e;e++)n+="&nbsp;";o=o.substring(0,r)+n+o.substring(r+1),r+=n.length,t+=s}else"\n"===o[r]?(o=o.substring(0,r)+"<br/>"+o.substring(r+1),r+=5,i=r,t=0):(r++,t++);return o.match(/<br\/>$/)&&(o+="&nbsp;"),o},_setText:function(){this._textContainerDomNode.innerHTML=this._getText(),this._triggerLayout()},_setTextShadow:function(){var e=this.shadowColor&&""!==this.shadowColor?this.shadowColor:void 0;l(this._textContainerDomNode,"textShadow",this.shadowOffset||e?(this.shadowOffset?u(this.shadowOffset.x)+" "+u(this.shadowOffset.y):"0px 0px")+" "+(this.shadowRadius?u(this.shadowRadius):"0.1em")+" "+n.val(e,"black"):"")},properties:{ellipsize:{set:function(e){return l(this._textContainerDomNode,"textOverflow",e?"ellipsis":"clip"),l(this._textContainerDomNode,"overflow",e?"hidden":"visible"),e},value:!0},html:{set:function(e){return this._textContainerDomNode.innerHTML=e,this._hasSizeDimensions()&&this._triggerLayout(),e}},shadowColor:{post:"_setTextShadow"},shadowOffset:{post:"_setTextShadow"},shadowRadius:{post:"_setTextShadow"},text:c,textAlign:{set:function(e){return l(this._textContainerDomNode,"textAlign",/(center|right)/.test(e)?e:"left"),e}},textid:c,wordWrap:{set:function(e){return l(this._textContainerDomNode,"whiteSpace",e?"normal":"nowrap"),e}},verticalAlign:{set:function(e){var t,i,r=this.center||{},o=this._textContainer;switch(e){case s.TEXT_VERTICAL_ALIGNMENT_TOP:t=0;break;case s.TEXT_VERTICAL_ALIGNMENT_CENTER:r.y="50%";break;case s.TEXT_VERTICAL_ALIGNMENT_BOTTOM:i=0}return o.top=t,o.center=r,o.bottom=i,e},value:s.TEXT_VERTICAL_ALIGNMENT_CENTER}}})});