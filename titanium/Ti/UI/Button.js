define(["Ti/_/declare","Ti/_/UI/Widget","Ti/_/dom","Ti/_/css","Ti/_/style","Ti/_/lang","Ti/Locale","Ti/UI"],function(e,t,i,r,o,n,a,s){var l=require.on,u=o.set,d={post:function(){this.backgroundColor||this.backgroundDisabledColor||this.backgroundDisabledImage||this.backgroundFocusedColor||this.backgroundFocusedImage||this.backgroundImage||this.backgroundSelectedColor||this.backgroundSelectedImage?this._clearDefaultLook():this._setDefaultLook(),this._doBackground()}},c={post:function(){var e=a._getString(this.titleid,this.title);this._buttonTitle.text=e.replace(/^[ \t]+/gm,function(e){return new Array(e.length+1).join("&nbsp;")}),this._hasSizeDimensions()&&this._triggerLayout()}};return e("Ti.UI.Button",t,{constructor:function(){var e=this._contentContainer=s.createView({width:s.INHERIT,height:s.INHERIT,layout:s._LAYOUT_CONSTRAINING_HORIZONTAL,borderColor:"transparent"}),t=this.domNode;this._add(e),e._add(this._buttonImage=s.createImageView()),e._add(this._buttonTitle=s.createLabel({textAlign:s.TEXT_ALIGNMENT_CENTER,verticalAlign:s.TEXT_VERTICAL_ALIGNMENT_CENTER,width:s.INHERIT,height:s.INHERIT})),this._setDefaultLook(),l(this,"touchstart",this,function(){this._hasDefaultLook?(r.remove(t,"TiUIElementGradient"),r.add(t,"TiUIElementGradientActive")):(this.selectedColor&&(this._buttonTitle.color=this.selectedColor),this.backgroundSelectedColor&&u(this.domNode,"backgroundColor",this.backgroundSelectedColor))}),l(this,"touchend",this,function(){this._hasDefaultLook?(r.remove(t,"TiUIElementGradientActive"),r.add(t,"TiUIElementGradient")):(this.selectedColor&&(this._buttonTitle.color=this.color||"#000"),this.backgroundSelectedColor&&u(this.domNode,"backgroundColor",this.backgroundColor))}),l(t,"mouseout",this,function(){this.selectedColor&&(this._buttonTitle.color=this.color||"#000")})},_defaultWidth:s.SIZE,_defaultHeight:s.SIZE,_setDefaultLook:function(){this._hasDefaultLook||(this._hasDefaultLook=!0,this._previousBorderWidth=this.borderWidth,this._previousBorderColor=this.borderColor,r.add(this.domNode,"TiUIElementGradient"),r.add(this.domNode,"TiUIButtonDefault"),this._contentContainer.borderWidth=6,this._getBorderFromCSS())},_clearDefaultLook:function(){this._hasDefaultLook&&(this._hasDefaultLook=!1,this.borderWidth=this._previousBorderWidth,this.borderColor=this._previousBorderColor,r.remove(this.domNode,"TiUIElementGradient"),r.remove(this.domNode,"TiUIButtonDefault"),this._contentContainer.borderWidth=0)},properties:{backgroundColor:d,backgroundDisabledColor:d,backgroundDisabledImage:d,backgroundFocusedColor:d,backgroundFocusedImage:d,backgroundImage:d,backgroundSelectedColor:d,backgroundSelectedImage:d,enabled:{set:function(e,t){return e!==t&&(this._hasDefaultLook&&(e?(r.add(this.domNode,"TiUIElementGradient"),u(this.domNode,"backgroundColor","")):(r.remove(this.domNode,"TiUIElementGradient"),u(this.domNode,"backgroundColor","#aaa"))),this._setTouchEnabled(e)),e},value:!0},font:{set:function(e){return this._buttonTitle.font=e,e}},image:{set:function(e){return this._buttonImage.image=e,e}},shadowColor:{post:function(e){this._buttonTitle.shadowColor=e}},shadowOffset:{post:function(e){this._buttonTitle.shadowOffset=e}},shadowRadius:{post:function(e){this._buttonTitle.shadowRadius=e}},selectedColor:void 0,textAlign:{set:function(e){return this._buttonTitle.textAlign=e}},title:c,titleid:c,verticalAlign:{set:function(e){return this._buttonTitle.verticalAlign=e}}}})});