define(["Ti/_/css","Ti/_/declare","Ti/UI/View","Ti/UI","Ti/_/lang"],function(e,t,i,r,o){var n=o.isDef,a=r.FILL,s="TiUINavigationGroup";return t("Ti.UI.MobileWeb.NavigationGroup",i,{constructor:function(t){var i=this,o=i.__values__.constants.window=t&&t.window,n=i._navBarContainer=r.createView({height:50,width:r.FILL,layout:r._LAYOUT_CONSTRAINING_HORIZONTAL});e.add(n.domNode,s),i.layout=r._LAYOUT_CONSTRAINING_VERTICAL,n.add(i._leftContainer=r.createView({width:r.SIZE,height:"100%",left:5,right:5})),n.add(i._centerContainer=r.createView({width:r.FILL,height:"100%"})),n.add(i._rightContainer=r.createView({width:r.SIZE,height:"100%",left:5,right:5})),i._add(n),i._add(i._contentContainer=r.createView({width:a,height:a})),this.navBarAtTop=!0,n._getBorderFromCSS(),i._windows=[],o&&i.open(o)},_defaultWidth:a,_defaultHeight:a,_updateNavBar:function(){var e,t,i,o=this,n=o._windows,a=n.length,s=n[a-1],l=this._navBarContainer,u=o._leftContainer,d=o._centerContainer,c=o._rightContainer;s&&(i=s.rightNavButton,s.leftNavButton?e=s.leftNavButton:(o._backButton||(o._backButton=r.createButton({title:"Back"}),require.on(o._backButton,"singletap",function(){o.close(n[n.length-1])})),a>1&&(e=o._backButton)),u._children[0]!==e&&(u._removeAllChildren(),e&&u.add(e)),c._children[0]!==i&&(c._removeAllChildren(),i&&c.add(i)),l.backgroundColor=s.barColor,l.backgroundImage=s.barImage,l.opacity=s.translucent?.5:1,l.height=s.navBarHidden&&s.modal?0:50,t=s.titleControl?s.titleControl:s.titleImage?s._titleImageView||(s._titleImageView=r.createImageView({image:s.titleImage})):s._titleControl||(s._titleControl=r.createLabel({text:s._getTitle()||this._tab&&this._tab._getTitle()||"",width:"100%",height:"100%",textAlign:r.TEXT_ALIGNMENT_CENTER})),d._children[0]!==t&&(d._removeAllChildren(),t&&d.add(t)))},_getTopWindow:function(){var e=this._windows,t=e.length;return t?e[e.length-1]:null},open:function(e){if(!e._opened){var t=this._windows,i=this._tab;e._navGroup=this,!n(e.backgroundColor)&&!n(e.backgroundImage)&&(e.backgroundColor="#fff"),~(t.length-1)&&t[t.length-1].fireEvent("blur"),i&&(e.tabGroup=(e.tab=i)._tabGroup),t.push(e),this._contentContainer._add(e),this._updateNavBar(),e._opened||e.fireEvent("open"),e._opened=1,e.fireEvent("focus")}},close:function(e){var t=this._windows,i=t.indexOf(e),r=this;e._navGroup=void 0,i>0&&(t.splice(i,1),e.fireEvent("blur"),r._contentContainer.remove(e),e.fireEvent("close"),e._opened=0,this._updateNavBar(),t[t.length-1].fireEvent("focus"))},_reset:function(){for(var e,t=this._windows,i=t.length-1,r=i;;){if(e=t[i],!i)break;i--===r&&e.fireEvent("blur"),this._contentContainer.remove(e),e.fireEvent("close"),e._opened=0}t.splice(1),this._updateNavBar(),e.fireEvent("focus")},constants:{window:void 0,bubbleParent:!1},properties:{navBarAtTop:{set:function(t,i){if(t!==i){var r=this._navBarContainer,o=r.domNode;this._remove(r),this._insertAt(r,t?0:1),e.remove(o,s+(t?"Top":"Bottom")),e.add(o,s+(t?"Bottom":"Top"))}return t}}}})});