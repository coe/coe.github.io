define(["Ti/_/Evented","Ti/_/lang","Ti/UI","Ti/_/ready","Ti/_/event"],function(e,t,i,r,o){function n(){var e=!!(window.innerWidth&&window.innerWidth>window.innerHeight),t=g.__values__.constants;return t.orientation=e?i.LANDSCAPE_LEFT:i.PORTRAIT,t.landscape=e,t.portrait=!e,g.orientation}function a(e){var t=null,r=Math.abs(e.beta||0|e.y),o=Math.abs(e.gamma||0|e.x);5>r&&o>170&&(t=i.FACE_DOWN),5>r&&5>o&&(t=i.FACE_UP),r>50&&0>r&&u!=t&&(t=i.UPSIDE_PORTRAIT),null!==t&&u!==t&&g.fireEvent("orientationchange",{orientation:u=t,source:e.source})}var s=window,l=require.on,u=null,d=Date.now(),c={},h=0,p=[],g=t.setObject("Ti.Gesture",e,{_updateOrientation:function(){n(),u!==g.orientation&&g.fireEvent("orientationchange",{orientation:u=g.orientation})},addEventListener:function(t){"orientationchange"==t&&h++,1==h&&(p=[l(s,"MozOrientation",a),l(s,"deviceorientation",a)]),e.addEventListener.apply(this,arguments)},removeEventListener:function(t){"orientationchange"==t&&(h=Math.max(h-1,0)),0==h&&o.off(p),e.removeEventListener.apply(this,arguments)},isLandscape:function(){return g.landscape},isPortrait:function(){return g.portrait},constants:{portrait:!1,landscape:!1,orientation:i.UNKNOWN}});return r(function(){n()}),l(s,"devicemotion",function(e){var t,i,r,o,n=e.acceleration||e.accelerationIncludingGravity,a=n&&{x:n.x,y:n.y,z:n.z,source:e.source};a&&(void 0!==c.x&&(t=Math.abs(c.x-a.x)>10,i=Math.abs(c.y-a.y)>10,r=Math.abs(c.z-a.z)>10,(t&&(i||r)||i&&r)&&(o=Date.now(),(a.timestamp=o-d)>300&&(d=o,g.fireEvent("shake",a)))),c=a)}),g});