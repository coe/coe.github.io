define(["Ti/_/declare","Ti/_/lang"],function(e,t){function i(e){if(r&&2==r.length&&2==e.touches.length){var t=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),i=0,n=Date.now();return a&&(i=Math.abs(a/o-t/o)/((n-s)/1e3)),a=t,s=n,{pinch:[{scale:t/o,velocity:i}]}}}var r=null,n=null,o=null,a=null,s=null,l=100;return t.setObject("Ti._.Gestures.Pinch",{processTouchStartEvent:function(e){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,a=e.touches.length,s=e.changedTouches.length;1==a&&1==s?(r=[{x:t,y:i}],n=setTimeout(function(){r=null},l)):2==a&&1==s?(clearTimeout(n),r&&(r.push({x:t,y:i}),o=Math.sqrt(Math.pow(r[0].x-r[1].x,2)+Math.pow(r[0].y-r[1].y,2)))):2==a&&2==s?(r=[{x:t,y:i},{x:e.changedTouches[1].clientX,y:e.changedTouches[1].clientY}],o=Math.sqrt(Math.pow(r[0].x-r[1].x,2)+Math.pow(r[0].y-r[1].y,2))):r=null},processTouchEndEvent:function(e){var t=i(e);return r=null,t},processTouchMoveEvent:function(e){return i(e)},processTouchCancelEvent:function(){r=null}})});