define(["Ti/_/declare","Ti/_/lang"],function(e,t){function i(e){var t;return n?(t=r(e),n=null,{draggingcancel:t}):void 0}function r(e){var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,r=t-n.x,o=i-n.y;return[{x:t,y:i,distanceX:r,distanceY:o,distance:Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}]}var n,o=25;return t.setObject("Ti._.Gestures.Drag",{processTouchStartEvent:function(e){if(1==e.touches.length&&1==e.changedTouches.length){var t,o;return n={x:t=e.changedTouches[0].clientX,y:o=e.changedTouches[0].clientY},{draggingstart:r(e)}}return n?i(e):void 0},processTouchEndEvent:function(e){if(n){var t,a=Math.sqrt(Math.pow(e.changedTouches[0].clientX-n.x,2)+Math.pow(e.changedTouches[0].clientY-n.y,2));return 0===e.touches.length&&1===e.changedTouches.length&&a>o?(t=r(e),n=null,{draggingend:t}):i(e)}},processTouchMoveEvent:function(e){return n?1==e.touches.length&&1==e.changedTouches.length?{dragging:r(e)}:i(e):void 0},processTouchCancelEvent:function(e){return n&&i(e)}})});