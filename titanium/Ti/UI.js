define(["Ti/_","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/_/dom","Ti/_/event","Ti/_/Gestures/DoubleTap","Ti/_/Gestures/Dragging","Ti/_/Gestures/LongPress","Ti/_/Gestures/Pinch","Ti/_/Gestures/SingleTap","Ti/_/Gestures/Swipe","Ti/_/Gestures/TouchCancel","Ti/_/Gestures/TouchEnd","Ti/_/Gestures/TouchMove","Ti/_/Gestures/TouchStart","Ti/_/Gestures/TwoFingerTap"],function(e,t,i,r,o,n,a,s,l,u,d,c,h,p,f,g,_,v,T){var w,U,m,b=window,I=document,E=I.body,y=require.on,C=require.is,S="2DMatrix,ActivityIndicator,AlertDialog,Animation,Button,EmailDialog,ImageView,Label,OptionDialog,Picker,PickerColumn,PickerRow,ProgressBar,ScrollableView,ScrollView,Slider,Switch,Tab,TabGroup,TableView,TableViewRow,TableViewSection,TextArea,TextField,View,WebView,Window",L={},A=n.set,N=navigator.userAgent.toLowerCase().match(/(iphone|android)/),x=N&&"iphone"===N[0],k={},O=function(){Ti.UI._recalculateLayout(),w=0},R=O,P=a.unitize,M=[v,g,_,f,u,h,l,d,c,p,T];return y(E,"touchmove",function(e){e.preventDefault()}),S.split(",").forEach(function(e){L["create"+e]=function(t){return new(require("Ti/UI/"+e))(t)}}),!navigator.standalone&&N&&(R=function(){if(!w){w=1;var e,t=0|require("Ti/Gesture").isPortrait,i=k[t];i||(x?(i=b.innerHeight+60,b.screen.availHeight-i>50&&(i+=50)):i=b.outerHeight/(b.devicePixelRatio||0),k[t]=i),A(E,"height",i+"px"),x?(b.scrollTo(0,0),O()):e=setInterval(function(){b.scrollTo(0,-1),b.innerHeight+1>=i&&(clearTimeout(e),O())},50)}},o(R),y(b,"orientationchange",R),y(b,"touchstart",R)),o(10,function(){setTimeout(function(){function e(e,t){var i,r,o,a=0,s=M.length,l=[],u=t._elements;if(u&&u.length){for(n||require.mix(t,{touches:~["mouseup","pointerup","MSPointerUp"].indexOf(t.type)?[]:[t],targetTouches:[],changedTouches:[t]});s>a;a++)if(o=M[a]["process"+e]){r=o(t,u);for(i in r)l[i]||(l[i]=[]),l[i]=l[i].concat(r[i])}Ti.UI._fireGestureEvents(l,u)}}var t=Ti.UI._container=Ti.UI.createView({left:0,top:0}),r=t.domNode,o=t._layoutCoefficients,n=i("touch"),a=b.navigator.msPointerEnabled,l=0;o.width.x1=1,o.height.x1=1,t._measuredTop=0,t._measuredLeft=0,r.id="TiUIContainer",A(r,"overflow","hidden"),E.appendChild(r),(U=I.getElementById("splash"))&&t.addEventListener("postlayout",function(){setTimeout(function(){A(U,{position:"absolute",width:P(t._measuredWidth),height:P(t._measuredHeight),left:0,top:0,right:"",bottom:""})},10)}),R(),y(r,a?"MSPointerDown":n?"touchstart":"mousedown",function(t){var i=[y(b,a?"MSPointerMove":n?"touchmove":"mousemove",function(t){(n||l)&&e("TouchMoveEvent",t)}),y(b,a?"MSPointerUp":n?"touchend":"mouseup",function(t){l=0,e("TouchEndEvent",t),s.off(i)}),n&&y(b,"touchcancel",function(t){e("TouchCancelEvent",t),s.off(i)})];l=1,e("TouchStartEvent",t)})},1)}),y(b,"resize",function(){Ti.UI._recalculateLayout()}),r.setObject("Ti.UI",t,L,{_addWindow:function(e,t){return this._container.add(e.modal?e._modalParentContainer:e),t&&this._setWindow(e),U&&a.destroy(U),e},_setWindow:function(e){this.__values__.constants.currentWindow=e},_removeWindow:function(e){return this._container.remove(e.modal?e._modalParentContainer:e),e},_fireGestureEvents:function(e,t){for(var i,r,o,n,a,s=0,l=M.length,u=0;t[u]&&!t[u]._isPublished;)u++;t[u]||(u=0);for(s in e)for(i=0,l=e[s].length;l>i;i++)a=e[s][i],C(a.x,"Number")&&C(a.y,"Number")?(n=this._container.convertPointToView({x:a.x,y:a.y},t[u]),r=n?n.x:a.x,o=n?n.y:a.y):r=o=void 0,a.x=r,a.y=o,a.bubbles=!0,a.cancelBubble=!1,t[u].fireEvent(s,a)},_layoutSemaphore:0,_nodesToLayout:[],_startLayout:function(){this._layoutSemaphore++},_finishLayout:function(){0===--this._layoutSemaphore&&this._triggerLayout(!0)},_elementLayoutCount:0,_triggerLayout:function(e,t){function r(){o._elementLayoutCount=0;var e,t,r,n,a,s,l,u,d,c,h=o._nodesToLayout,p=[],f=!1,g=o._container,_=h.length;for(i("ti-instrumentation")&&(o._layoutInstrumentationTest=instrumentation.startTest("Layout")),d=0;_>d;d++)if(e=h[d],e._isAttachedToActiveWin()){for(l=[e];l.length>0;){t=l.pop(),t._markedForLayout=!0,a=t._children;for(c in a)s=a[c],("composite"!==t.layout||s._needsMeasuring||t._layout._isDependentOnParent(s))&&l.push(s)}if(e===g)f=!0;else for(r=e;;){if(r._markedForLayout=!0,n=r,r=r._parent,u=!1,!r||r===g){f=!0;break}for(r._hasSizeDimensions()||r._needsMeasuring||(!r._markedForLayout&&!~p.indexOf(r)&&p.push(r),u=!0),l=[r];l.length>0;){t=l.pop(),a=t._children;for(c in a)s=a[c],s!==n&&("composite"!==t.layout||s._needsMeasuring||t._layout._isDependentOnParent(s))&&(s._markedForLayout=!0,l.push(s))}if(u)break}}if(f){var v=g.__values__.properties,T=g._measuredWidth=v.width=b.innerWidth,w=g._measuredHeight=v.height=b.innerHeight;g._measuredSandboxWidth=T,g._measuredSandboxHeight=w,g.fireEvent("postlayout"),A(g.domNode,{width:T+"px",height:w+"px"}),g._layout._doLayout(g,T,w,!1,!1)}for(d=0;d<p.length;d++)t=p[d],t._layout._doLayout(t,t._measuredWidth-t._borderLeftWidth-t._borderRightWidth,t._measuredHeight-t._borderTopWidth-t._borderBottomWidth,t._parent._layout._getWidth(t,t.width)===Ti.UI.SIZE,t._parent._layout._getHeight(t,t.height)===Ti.UI.SIZE);i("ti-instrumentation")&&instrumentation.stopTest(o._layoutInstrumentationTest,o._elementLayoutCount+" out of approximately "+document.getElementById("TiUIContainer").getElementsByTagName("*").length+" elements laid out."),o._layoutInProgress=!1,o._layoutTimer=null,o._nodesToLayout=[],o.fireEvent("postlayout")}var o=this;~o._nodesToLayout.indexOf(e)||(o._nodesToLayout.push(e),t?(clearTimeout(o._layoutTimer),o._layoutInProgress=!0,r()):1===o._nodesToLayout.length&&(o._layoutInProgress=!0,o._layoutTimer=setTimeout(r,10)))},_recalculateLayout:function(){m||(m=require("Ti/Gesture")),m._updateOrientation();var e=this._container;e&&(e.width=b.innerWidth,e.height=b.innerHeight)},properties:{backgroundColor:{set:function(e){return this._container.backgroundColor=e}},backgroundImage:{set:function(e){return A(E,"backgroundImage",e?n.url(e):"")}},currentTab:void 0},convertUnits:function(t,i){var r=a.computeSize(t,0,!1);switch(i){case Ti.UI.UNIT_MM:r*=10;case Ti.UI.UNIT_CM:return r/(.0393700787*e.dpi*10);case Ti.UI.UNIT_IN:return r/e.dpi;case Ti.UI.UNIT_DIP:return 96*r/e.dpi;case Ti.UI.UNIT_PX:return r;default:return 0}},constants:{currentWindow:void 0,UNKNOWN:0,FACE_DOWN:1,FACE_UP:2,PORTRAIT:3,UPSIDE_PORTRAIT:4,LANDSCAPE_LEFT:5,LANDSCAPE_RIGHT:6,INPUT_BORDERSTYLE_NONE:0,INPUT_BORDERSTYLE_LINE:1,INPUT_BORDERSTYLE_BEZEL:2,INPUT_BORDERSTYLE_ROUNDED:3,KEYBOARD_DEFAULT:2,KEYBOARD_EMAIL:3,KEYBOARD_NUMBER_PAD:6,KEYBOARD_PHONE_PAD:7,KEYBOARD_URL:8,KEYBOARD_TYPE_DEFAULT:2,KEYBOARD_TYPE_EMAIL:3,KEYBOARD_TYPE_NUMBER_PAD:6,KEYBOARD_TYPE_PHONE_PAD:7,KEYBOARD_TYPE_URL:8,NOTIFICATION_DURATION_LONG:1,NOTIFICATION_DURATION_SHORT:2,PICKER_TYPE_DATE:2,PICKER_TYPE_DATE_AND_TIME:3,PICKER_TYPE_PLAIN:4,PICKER_TYPE_TIME:5,RETURNKEY_DEFAULT:0,RETURNKEY_DONE:1,RETURNKEY_EMERGENCY_CALL:2,RETURNKEY_GO:3,RETURNKEY_GOOGLE:4,RETURNKEY_JOIN:5,RETURNKEY_NEXT:6,RETURNKEY_ROUTE:7,RETURNKEY_SEARCH:8,RETURNKEY_SEND:9,RETURNKEY_YAHOO:10,TEXT_ALIGNMENT_CENTER:"center",TEXT_ALIGNMENT_RIGHT:"right",TEXT_ALIGNMENT_LEFT:"left",TEXT_AUTOCAPITALIZATION_ALL:3,TEXT_AUTOCAPITALIZATION_NONE:0,TEXT_AUTOCAPITALIZATION_SENTENCES:2,TEXT_AUTOCAPITALIZATION_WORDS:1,TEXT_VERTICAL_ALIGNMENT_BOTTOM:"bottom",TEXT_VERTICAL_ALIGNMENT_CENTER:"center",TEXT_VERTICAL_ALIGNMENT_TOP:"top",ANIMATION_CURVE_EASE_IN:1,ANIMATION_CURVE_EASE_IN_OUT:0,ANIMATION_CURVE_EASE_OUT:2,ANIMATION_CURVE_LINEAR:3,SIZE:"auto",FILL:"fill",INHERIT:"inherit",UNIT_PX:"px",UNIT_MM:"mm",UNIT_CM:"cm",UNIT_IN:"in",UNIT_DIP:"dp",_LAYOUT_COMPOSITE:"composite",_LAYOUT_VERTICAL:"vertical",_LAYOUT_HORIZONTAL:"horizontal",_LAYOUT_CONSTRAINING_VERTICAL:"constrainingVertical",_LAYOUT_CONSTRAINING_HORIZONTAL:"constrainingHorizontal"}})});