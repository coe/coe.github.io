define(["Ti/_","Ti/API","Ti/_/analytics","Ti/App","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/Buffer","Ti/Platform","Ti/UI","Ti/Locale","Ti/_/include"],function(e,t,i,r,n,o,a,s,l,u,d,c){function h(){p||(p=1,r.fireEvent("close"),i.add("ti.end","ti.end"))}var f,p,g,_=window,v=require,T=v.config,m=r.deployType,w=T.ti.version,U=(v.is,v.on),b=[],I=a.setObject("Ti",n,{constants:{buildDate:T.ti.buildDate,buildHash:T.ti.buildHash,version:w},properties:{userAgent:function(){return navigator.userAgent}},createBuffer:function(e){return new u(e)},include:function(e){"array"==typeof e||(e=[].concat(Array.prototype.slice.call(arguments,0))),e.forEach(function(e){require("Ti/_/include!"+e)})},deferStart:function(){if(!f){var e=Math.round(1e12*Math.random());return b.push(e),function(){var t=b.indexOf(e);~t&&b.splice(t,1),f=1,b.length||(o("ti-instrumentation")&&instrumentation.stopTest(instrumentation.systemLoadTimeTest),require(T.main||["app.js"]))}}t.warn("app.js already loaded!")}}),y=I.deferStart();if(!o("js-btoa")){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x=String.fromCharCode;_.btoa=function(e){for(var t,i,r,n,o,a,s,l=[],u=0,d=e.length;d>u;)t=e.charCodeAt(u++),i=e.charCodeAt(u++),r=e.charCodeAt(u++),n=t>>2,o=(3&t)<<4|i>>4,a=(15&i)<<2|r>>6,s=63&r,isNaN(i)?a=s=64:isNaN(r)&&(s=64),l.push(E.charAt(n)+E.charAt(o)+E.charAt(a)+E.charAt(s));return l.join("")},_.atob=function(e){var t,i,r,n,o=[],a=0,s=e.length;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s>a;)t=E.indexOf(e.charAt(a++)),i=E.indexOf(e.charAt(a++)),r=E.indexOf(e.charAt(a++)),n=E.indexOf(e.charAt(a++)),o.push(x(t<<2|i>>4)),64!==r&&o.push(x((15&i)<<4|r>>2)),64!==n&&o.push(x((3&r)<<6|n));return o.join("")}}return Object.defineProperty(_,"Ti",{value:I,writable:!1}),Object.defineProperty(_,"Titanium",{value:I,writable:!1}),t.info("Appcelerator Titanium "+w+" Mobile Web"),T.vendorPrefixes||(T.vendorPrefixes=["","Moz","Webkit","O","ms"]),U(_,"beforeunload",h),U(_,"unload",h),o("ti-show-errors")&&U(_,"error",function(e){function t(e,t,i,r){l.add(c.createLabel({color:i,font:{fontSize:r,fontWeight:"bold"},height:t,left:10,right:10,textAlign:c.TEXT_ALIGNMENT_CENTER,text:e}))}if(!g){g=1;var i,r,n=e.filename||"",o=n.match(/:\/\/.+(\/.*)/),a=o?o[1]:e.filename,s=e.lineno,l=c.createWindow({backgroundColor:"#f00",top:"100%",height:"100%",layout:c._LAYOUT_CONSTRAINING_VERTICAL});t("Application Error","15%","#0f0","24pt"),t((e.message||"Unknown error").trim()+(a&&"undefined"!==a?" at "+a:"")+(s?" (line "+s+")":""),"45%","#fff","16pt"),l.add(i=c.createView({height:"12%"})),i.add(r=c.createButton({title:"Dismiss"})),l.addEventListener("close",function(){l.destroy()}),r.addEventListener("singletap",function(){l.animate({duration:500,top:"100%"},function(){l.close(),g=0})}),t("Error messages will only be displayed during development. When your app is packaged for final distribution, no error screen will appear. Test your code!","28%","#000","10pt"),U.once(l,"postlayout",function(){setTimeout(function(){l.animate({duration:500,top:0},function(){l.top=0,l.height="100%"})},100)}),l.open()}return!0}),s(function(){if(l.set(document.body,{margin:0,padding:0}),r.analytics){var e=require.config.ti.analyticsPlatformName;null===localStorage.getItem("ti:enrolled")&&(i.add("ti.enroll","ti.enroll",{app_name:r.name,app_version:r.version,oscpu:1,mac_addr:null,deploytype:m,ostype:d.osname,osarch:null,app_id:r.id,platform:e,model:d.model}),localStorage.setItem("ti:enrolled",!0)),i.add("ti.start","ti.start",{tz:(new Date).getTimezoneOffset(),deploytype:m,os:d.osname,osver:d.ostype,version:T.ti.version,platform:e,model:d.model,un:null,app_version:r.version,nettype:null}),i.send()}setTimeout(y,1)}),I});