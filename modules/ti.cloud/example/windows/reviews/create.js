var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Create Review"]=function(e){function t(){l.hide(),Cloud.Reviews.create({user_id:n,content:a.value,rating:s.value,allow_duplicate:1},function(e){e.success?(alert("Created!"),a.value=""):Utils.error(e),l.show()})}var i=WindowManager.createWindow({backgroundColor:"white"}),r=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});i.add(r);var o=Ti.UI.createLabel({text:"Loading, please wait...",textAlign:"center",color:"#000",backgroundColor:"#fff",top:0});i.add(o);var n;Cloud.Users.showMe(function(e){e.success?(i.remove(o),n=e.users[0].id):(Utils.error(e),o.text=e.error&&e.message||e)});var a=Ti.UI.createTextField({hintText:"Content",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});r.add(a);var s=Ti.UI.createSlider({value:5,min:1,max:5,top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u});r.add(s);var l=Ti.UI.createButton({title:"Create",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});r.add(l),l.addEventListener("click",t);for(var u=[a],d=0;d<u.length;d++)u[d].addEventListener("return",t);return i.addEventListener("open",function(){a.focus()}),i};