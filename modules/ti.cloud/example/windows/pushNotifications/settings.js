var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud"),PushManager=require("windows/pushNotifications/pushManager"),androidPushModule=null;exports["Settings for This Device"]=function(e){function t(){o.title=Utils.pushNotificationsEnabled?"Enabled":"Disabled"}var i=WindowManager.createWindow({backgroundColor:"white"}),r=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});i.add(r);var o=Ti.UI.createButton({top:10,width:320,height:50,title:Utils.pushNotificationsEnabled?"Enabled":"Disabled"});if(o.addEventListener("click",function(){Utils.pushNotificationsEnabled?PushManager.disablePushNotifications():PushManager.enablePushNotifications()}),PushManager.setOnPushEnabled(t),PushManager.setOnPushDisabled(t),r.add(o),"iPhone OS"===Ti.Platform.name);else if("android"===Ti.Platform.name){if(null===androidPushModule&&(androidPushModule=PushManager.getAndroidPushModule(),null===androidPushModule))return i;var n=Ti.UI.createButton({top:10,width:320,height:50,title:androidPushModule.showTrayNotification?"Show in Tray":"Do Not Show in Tray"});n.addEventListener("click",function(){androidPushModule.showTrayNotification=!androidPushModule.showTrayNotification,n.title=androidPushModule.showTrayNotification?"Show in Tray":"Do Not Show in Tray"}),r.add(n);var a=Ti.UI.createButton({top:10,width:320,height:50,title:androidPushModule.showAppOnTrayClick?"Tray Click Shows App":"Tray Click Does Nothing"});a.addEventListener("click",function(){androidPushModule.showAppOnTrayClick=!androidPushModule.showAppOnTrayClick,a.title=androidPushModule.showAppOnTrayClick?"Tray Click Shows App":"Tray Click Does Nothing"}),r.add(a);var s=Ti.UI.createButton({top:10,width:320,height:50,title:androidPushModule.showTrayNotificationsWhenFocused?"Show Trays when Focused":"Hide Trays when Focused"});s.addEventListener("click",function(){androidPushModule.showTrayNotificationsWhenFocused=!androidPushModule.showTrayNotificationsWhenFocused,s.title=androidPushModule.showTrayNotificationsWhenFocused?"Show Trays when Focused":"Hide Trays when Focused"}),r.add(s);var l=Ti.UI.createButton({top:10,width:320,height:50,title:androidPushModule.focusAppOnPush?"Push Focuses App":"Push Doesn't Focus App"});l.addEventListener("click",function(){androidPushModule.focusAppOnPush=!androidPushModule.focusAppOnPush,l.title=androidPushModule.focusAppOnPush?"Push Focuses App":"Push Doesn't Focus App"}),r.add(l);var u=Ti.UI.createButton({top:10,width:320,height:50,title:androidPushModule.singleCallback?"Callbacks trigger one by one":"Callbacks trigger together"});u.addEventListener("click",function(){androidPushModule.singleCallback=!androidPushModule.singleCallback,u.title=androidPushModule.singleCallback?"Callbacks trigger one by one":"Callbacks trigger together"}),r.add(u)}var d=Ti.UI.createButton({top:10,width:320,height:50,title:"Copy Push Token to Clipboard"});return d.addEventListener("click",function(){Utils.pushNotificationsEnabled?(alert("Token "+Utils.pushToken+" copied to clipboard."),Ti.UI.Clipboard.setText(Utils.pushToken)):alert("Please enable the push notification.")}),r.add(d),i};