var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Generic Send Request"]=function(e){function t(){for(var e=0;e<l.length;e++){if(!l[e].value.length)return void l[e].focus();l[e].blur()}s.hide(),Cloud.sendRequest({url:n.value,method:o.value,data:a.value?JSON.parse(a.value):null},function(e){e.success?(alert("Success! See log for response."),Ti.API.info("Reponse: "+JSON.stringify(e))):error(e),s.show()})}var i=WindowManager.createWindow(),r=(addBackButton(i),Ti.UI.createScrollView({contentHeight:Ti.UI.SIZE,layout:"vertical"}));i.add(r);var n=Ti.UI.createTextField({hintText:"url (users/query.json)",value:"users/query.json",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});r.add(n);var o=Ti.UI.createTextField({hintText:"method (GET)",value:"GET",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});r.add(o);var a=Ti.UI.createTextField({hintText:'data ({"where":{"first_name":"joe"}})',value:'{"where":{"first_name":"joe"}}',top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});r.add(a);var s=Ti.UI.createButton({title:"Send",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});r.add(s);var l=[n,o];s.addEventListener("click",t);for(var u=0;u<l.length;u++)l[u].addEventListener("return",t);return i.addEventListener("open",function(){n.focus()}),i};