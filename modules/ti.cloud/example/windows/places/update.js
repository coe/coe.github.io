var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Update Place"]=function(e){function t(){u.hide(),Cloud.Places.update({place_id:e.id,name:o.value,address:n.value,city:a.value,state:s.value,postal_code:l.value},function(e){e.success?alert("Updated!"):Utils.error(e),u.show()})}var i=WindowManager.createWindow({backgroundColor:"white"}),r=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});i.add(r);var o=Ti.UI.createTextField({hintText:"Name",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});r.add(o);var n=Ti.UI.createTextField({hintText:"Address",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});r.add(n);var a=Ti.UI.createTextField({hintText:"City",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});r.add(a);var s=Ti.UI.createTextField({hintText:"State",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});r.add(s);var l=Ti.UI.createTextField({hintText:"Postal Code",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,keyboardType:Ti.UI.KEYBOARD_NUMBER_PAD});r.add(l);var u=Ti.UI.createButton({title:"Update",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});r.add(u),u.addEventListener("click",t);for(var d=[o,n,a,s,l],c=0;c<d.length;c++)d[c].addEventListener("return",t);var h=Ti.UI.createLabel({text:"Loading, please wait...",textAlign:"center",top:0,right:0,bottom:0,left:0,backgroundColor:"#fff",zIndex:2});return i.add(h),i.addEventListener("open",function(){Cloud.Places.show({place_id:e.id},function(e){if(h.hide(),e.success){var t=e.places[0];o.value=t.name,n.value=t.address,a.value=t.city,s.value=t.state,l.value=t.postal_code,o.focus()}else Utils.error(e)})}),i};