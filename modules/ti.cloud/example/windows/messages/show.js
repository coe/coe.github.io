var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Show Message"]=function(e){var t=WindowManager.createWindow({backgroundColor:"white"}),i=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});t.add(i);var r=Ti.UI.createLabel({text:"Loading, please wait...",textAlign:"left",height:30+Utils.u,left:20+Utils.u,right:20+Utils.u});return i.add(r),Cloud.Messages.show({message_id:e.id},function(t){if(i.remove(r),t.success){if(e.allowReply){var n=Ti.UI.createButton({title:"Reply",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});n.addEventListener("click",function(){WindowManager.handleOpenWindow({target:"Reply Message",id:e.id,subject:t.messages[0].subject})}),i.add(n)}var o=Ti.UI.createButton({title:"Remove Message",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});o.addEventListener("click",function(){WindowManager.handleOpenWindow({target:"Remove Message",id:e.id})}),i.add(o),Utils.enumerateProperties(i,t.messages[0],20)}else Utils.error(t)}),t};