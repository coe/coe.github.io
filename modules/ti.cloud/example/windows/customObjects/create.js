var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Create Object"]=function(e){function t(){if(!s.value)return alert('Please fill in the "New Property Key" text field!'),void s.focus();var e=Ti.UI.createTextField({hintText:s.value,top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});s.value="",n.remove(u),n.add(e),e.addEventListener("return",i),o.push(e),n.add(u)}function i(){if(!a.value)return alert("Please enter a class name!"),void a.focus();if(!o.length)return alert("Please create at least one field!"),void s.focus();for(var e={classname:a.value,fields:{}},t=0;t<o.length;t++)e.fields[o[t].hintText]=o[t].value,o[t].blur();u.hide(),Cloud.Objects.create(e,function(e){if(e.success){alert("Created!");for(var t=0;t<o.length;t++)o[t].value=""}else Utils.error(e);u.show()})}var r=WindowManager.createWindow({backgroundColor:"white"}),n=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});r.add(n);var o=[],a=Ti.UI.createTextField({hintText:"Class Name",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});n.add(a);var s=Ti.UI.createTextField({hintText:"New Property Key",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_NONE,autocorrect:!1});s.addEventListener("return",t),n.add(s);var l=Ti.UI.createButton({title:"Add New Property",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});l.addEventListener("click",t),n.add(l);var u=Ti.UI.createButton({title:"Create",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});return n.add(u),a.addEventListener("return",i),u.addEventListener("click",i),r.addEventListener("open",function(){a.focus()}),r};