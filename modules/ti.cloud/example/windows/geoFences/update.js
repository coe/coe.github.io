var WindowManager=require("helper/WindowManager"),Utils=require("helper/Utils"),Cloud=require("ti.cloud");exports["Update GeoFence"]=function(e){function t(){for(var e=0;e<l.length;e++){if(!l[e].value.length)return void l[e].focus();l[e].blur()}a.hide();var t={id:i,geo_fence:o.value};Cloud.GeoFences.update(t,function(e){e.success?alert("Updated!"):Utils.error(e),a.show()})}var i=e.id,r=WindowManager.createWindow({backgroundColor:"white"}),n=Ti.UI.createScrollView({top:0,contentHeight:"auto",layout:"vertical"});r.add(n);var o=Ti.UI.createTextField({hintText:"geo_fence",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,height:40+Utils.u,borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED});n.add(o);var a=Ti.UI.createButton({title:"Update",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});n.add(a);var s=Ti.UI.createButton({title:"Remove",top:10+Utils.u,left:10+Utils.u,right:10+Utils.u,bottom:10+Utils.u,height:40+Utils.u});s.addEventListener("click",function(){WindowManager.handleOpenWindow({target:"Remove Geo Fence",id:e.id})}),n.add(s);var l=[o];a.addEventListener("click",t);for(var u=0;u<l.length;u++)l[u].addEventListener("return",t);return r.addEventListener("open",function(){o.focus()}),r};