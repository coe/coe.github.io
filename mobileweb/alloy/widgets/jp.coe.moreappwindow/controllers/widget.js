function WPATH(e){var t=e.lastIndexOf("/"),i=-1===t?"jp.coe.moreappwindow/"+e:e.substring(0,t)+"/jp.coe.moreappwindow/"+e.substring(t+1);return i}function Controller(){var e=new(require("alloy/widget"))("jp.coe.moreappwindow");this.__widgetId="jp.coe.moreappwindow",require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="widget",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var t=this,i={};t.__views.widget=Ti.UI.createView({id:"widget"}),t.__views.widget&&t.addTopLevelView(t.__views.widget),t.__views.loading_view=Ti.UI.createView({backgroundColor:"black",zIndex:100,id:"loading_view"}),t.__views.widget.add(t.__views.loading_view),t.__views.loading=Alloy.createWidget("com.appcelerator.loading","widget",{id:"loading",__parentSymbol:t.__views.loading_view}),t.__views.loading.setParent(t.__views.loading_view),t.__views.table=Ti.UI.createTableView({top:0,separatorColor:"black",id:"table"}),t.__views.widget.add(t.__views.table),i.destroy=function(){},_.extend(t,t.__views);var r,n,o,a,s,l,u,c,p,d,h,g,f,y,m,v,w,b,T;l=arguments[0]||{},o="http://itunes.apple.com/search?",a="http://itunes.apple.com/search?term=tsuyoshi+hyuga&country="+Ti.Locale.getCurrentCountry()+"&media=software&entity=software",r="http://play.google.com/store/search?q=tsuyoshi+hyuga",n='select * from html where url="'+a+'"',s=o,b=null!=(T=l.callback)?T:function(e,t){Ti.API.debug("callback "+JSON.stringify(t))},i.setClickCallback=function(e){return b=e},u=function(e){return console.debug("callbackfunc to "+e)},v=function(e){return t.loading_view.visible=e,e?t.loading.setOpacity(1):t.loading.setOpacity(0)},d=function(){return Ti.Yahoo.yql(n,function(e){var t;t=JSON.parse(e.data.body.p)})},h=function(){return Ti.Yahoo.yql(n,function(e){var t;t=JSON.parse(e.data.body.p)})},p=function(e,t){return Ti.API.debug("ここここ"),b(e,t)},g=function(){var e,t;t=JSON.parse(this.responseText),e=t.results,e=_.filter(e,function(e){return 0===e.price}),e=_.sortBy(e,function(e){return Number(e.releaseDate)}),e=_.filter(e,function(e){return e.bundleId!==Ti.App.id})},f=function(i){var r,n,o;return i=_.filter(i,function(e){return 0===e.price}),n=function(){var t,n,o;for(o=[],t=0,n=i.length;n>t;t++)r=i[t],r.clickRowCallback=p,o.push(e.createController("AppRow",r).getView());return o}(),t.table.data=n,v(!1),null!=(o=t.label)?o.text="end":void 0},y=function(){var e;return e=require("AppStoreClient/AppStoreClient"),e.getItunesData(function(e){return f(e),t.loading.setOpacity(0),v(!1)},function(){return v(!1)})},m=function(){var e,i,r;return v(!0),null!=(r=t.label)&&(r.text="loading"),t.table.data=[],i=a,e=Ti.Network.createHTTPClient({onload:g,onerror:function(){var e;return v(!1),null!=(e=t.label)?e.text="error":void 0},timeout:5e3}),e.open("GET",i),e.send()},c=function(){return Ti.Platform.openURL("market://search?q=tsuyoshi+hyuga")},w=function(){return y()},function(){return y()}(),_.extend(t,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;