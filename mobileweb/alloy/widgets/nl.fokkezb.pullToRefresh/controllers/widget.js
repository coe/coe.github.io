function WPATH(e){var t=e.lastIndexOf("/"),i=-1===t?"nl.fokkezb.pullToRefresh/"+e:e.substring(0,t)+"/nl.fokkezb.pullToRefresh/"+e.substring(t+1);return i}function Controller(){function e(e){return!f||v?!1:(v=!0,y=!1,c.view.ptrText.text=e||h.msgUpdating,c.view.ptrArrow.opacity=0,c.view.ptrIndicator.show(),c.view.prtCenter.show(),u.animate({top:0}),!0)}function t(){return f&&v?(c.view.ptrIndicator.hide(),c.view.ptrArrow.transform=Ti.UI.create2DMatrix(),c.view.ptrArrow.opacity=1,c.view.ptrText.text=h.msgPull,u.animate({top:0-g,duration:250}),setTimeout(function(){c.view.prtCenter.hide()},250),y=!0,v=!1,w=!1,!0):!1}function i(){return!f||w?!1:(w=!0,e(),c.trigger("release",{hide:t}),!0)}function r(e){b=e.firstVisibleItem}function n(e){0===b&&"down"===e.direction&&i()}function o(e){_.extend(h,e)}function a(){return f?!1:(s(),!0)}function s(){u.addEventListener("scroll",r),g=c.view.ptr.height,f=!0,m=!1,v=!1,w=!1,b=0,u.top=0-g,u.addEventListener("swipe",n),c.view.ptrText.text=h.msgPull}function l(){return f?(u.removeEventListener("scroll",r),u.removeEventListener("swipe",n),t(),f=!1,!0):!1}new(require("alloy/widget"))("nl.fokkezb.pullToRefresh"),this.__widgetId="nl.fokkezb.pullToRefresh",require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="widget";var u=arguments[0]?arguments[0].__parentSymbol:null;arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var c=this,p={};p.destroy=function(){},_.extend(c,c.__views);var d=arguments[0]||{},h={msgPull:L("ptrPull","Pull to refresh..."),msgRelease:L("ptrRelease","Release to refresh..."),msgUpdating:L("ptrUpating","Updating..."),top:0},g=50,f=!1,y=!0,m=!1,v=!1,w=!1,b=0;delete d.__parentSymbol,delete d.__itemTemplate,delete d.$model,o(d),s(),p.setOptions=o,p.show=e,p.hide=t,p.refresh=i,p.dettach=l,p.attach=a,_.extend(c,p)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;