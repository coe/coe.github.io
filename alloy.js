function ucfirst(e){return e?e[0].toUpperCase()+e.substr(1):e}function addNamespace(e){return(CONST.IMPLICIT_NAMESPACES[e]||CONST.NAMESPACE_DEFAULT)+"."+e}function processStyle(e,t,r,n,i){n=n||{},n.classes=r,t.apiName&&(n.apiName=t.apiName),t.id&&(n.id=t.id),t.applyProperties(exports.createStyle(e,n,i))}function isTabletFallback(){return Math.min(Ti.Platform.displayCaps.platformHeight,Ti.Platform.displayCaps.platformWidth)>=700}var _=require("alloy/underscore")._,Backbone=require("alloy/backbone"),CONST=require("alloy/constants");exports.version="1.7.33",exports._=_,exports.Backbone=Backbone;var DEFAULT_WIDGET="widget",TI_VERSION=Ti.version,MW320_CHECK=TI_VERSION>="3.2.0",IDENTITY_TRANSFORM=void 0,RESET={bottom:null,left:null,right:null,top:null,height:null,width:null,shadowColor:null,shadowOffset:null,backgroundImage:null,backgroundRepeat:null,center:null,layout:null,backgroundSelectedColor:null,backgroundSelectedImage:null,opacity:1,touchEnabled:!0,enabled:!0,horizontalWrap:!0,zIndex:0,backgroundColor:null,font:null,visible:!0,color:null,transform:null,backgroundGradient:{},borderColor:"transparent",borderRadius:null,borderWidth:null};exports.M=function(e,t,r){var n,i=(t||{}).config||{},o=i.adapter||{},s={},a={};o.type?(n=require("alloy/sync/"+o.type),s.sync=function(e,t,r){return n.sync(e,t,r)}):s.sync=function(e,t){Ti.API.warn("Execution of "+e+"#sync() function on a model that does not support persistence"),Ti.API.warn("model: "+JSON.stringify(t.toJSON()))},s.defaults=i.defaults,r&&(a.migrations=r),n&&_.isFunction(n.beforeModelCreate)&&(i=n.beforeModelCreate(i,e)||i);var l=Backbone.Model.extend(s,a);return l.prototype.config=i,_.isFunction(t.extendModel)&&(l=t.extendModel(l)||l),n&&_.isFunction(n.afterModelCreate)&&n.afterModelCreate(l,e),l},exports.C=function(e,t,r){var n,i={model:r},o=(r?r.prototype.config:{})||{};o.adapter&&o.adapter.type?(n=require("alloy/sync/"+o.adapter.type),i.sync=function(e,t,r){return n.sync(e,t,r)}):i.sync=function(e,t){Ti.API.warn("Execution of "+e+"#sync() function on a collection that does not support persistence"),Ti.API.warn("model: "+JSON.stringify(t.toJSON()))};var s=Backbone.Collection.extend(i);return s.prototype.config=o,_.isFunction(t.extendCollection)&&(s=t.extendCollection(s)||s),n&&_.isFunction(n.afterCollectionCreate)&&n.afterCollectionCreate(s),s},exports.UI={},exports.UI.create=function(controller,apiName,opts){opts=opts||{};var baseName,ns,parts=apiName.split(".");if(1===parts.length)baseName=apiName,ns=opts.ns||CONST.IMPLICIT_NAMESPACES[baseName]||CONST.NAMESPACE_DEFAULT;else{if(!(parts.length>1))throw"Alloy.UI.create() failed: No API name was given in the second parameter";baseName=parts[parts.length-1],ns=parts.slice(0,parts.length-1).join(".")}opts.apiName=ns+"."+baseName,baseName=baseName[0].toUpperCase()+baseName.substr(1);var style=exports.createStyle(controller,opts);return eval(ns)["create"+baseName](style)},exports.createStyle=function(e,t,r){var n,i;if(!t)return{};n=_.isArray(t.classes)?t.classes.slice(0):_.isString(t.classes)?t.classes.split(/\s+/):[],i=t.apiName,i&&-1===i.indexOf(".")&&(i=addNamespace(i));var o;o=require(e&&_.isObject(e)?"alloy/widgets/"+e.widgetId+"/styles/"+e.name:"alloy/styles/"+e);var s,a,l={};for(s=0,a=o.length;a>s;s++){var u=o[s],c=u.key;if(u.isApi&&-1===c.indexOf(".")&&(c=(CONST.IMPLICIT_NAMESPACES[c]||CONST.NAMESPACE_DEFAULT)+"."+c),u.isId&&t.id&&u.key===t.id||u.isClass&&_.contains(n,u.key));else{if(!u.isApi)continue;if(-1===u.key.indexOf(".")&&(u.key=addNamespace(u.key)),u.key!==i)continue}u.queries&&u.queries.formFactor&&!Alloy[u.queries.formFactor]||u.queries&&u.queries["if"]&&("false"===u.queries["if"].trim().toLowerCase()||-1!==u.queries["if"].indexOf("Alloy.Globals")&&!1===Alloy.Globals[u.queries["if"].split(".")[2]])||exports.deepExtend(!0,l,u.style)}var d=_.omit(t,[CONST.CLASS_PROPERTY,CONST.APINAME_PROPERTY]);return exports.deepExtend(!0,l,d),l[CONST.CLASS_PROPERTY]=n,l[CONST.APINAME_PROPERTY]=i,MW320_CHECK&&delete l[CONST.APINAME_PROPERTY],r?_.defaults(l,r):l},exports.addClass=function(e,t,r,n){if(!r)return void(n&&(MW320_CHECK&&delete n.apiName,t.applyProperties(n)));var i=t[CONST.CLASS_PROPERTY]||[],o=i.length;r=_.isString(r)?r.split(/\s+/):r;var s=_.union(i,r||[]);return o===s.length?void(n&&(MW320_CHECK&&delete n.apiName,t.applyProperties(n))):void processStyle(e,t,s,n)},exports.removeClass=function(e,t,r,n){r=r||[];var i=t[CONST.CLASS_PROPERTY]||[],o=i.length;if(!o||!r.length)return void(n&&(MW320_CHECK&&delete n.apiName,t.applyProperties(n)));r=_.isString(r)?r.split(/\s+/):r;var s=_.difference(i,r);return o===s.length?void(n&&(MW320_CHECK&&delete n.apiName,t.applyProperties(n))):void processStyle(e,t,s,n,RESET)},exports.resetClass=function(e,t,r,n){r=r||[],r=_.isString(r)?r.split(/\s+/):r,processStyle(e,t,r,n,RESET)},exports.createWidget=function(e,t,r){return"undefined"!=typeof t&&null!==t&&_.isObject(t)&&!_.isString(t)&&(r=t,t=DEFAULT_WIDGET),new(require("alloy/widgets/"+e+"/controllers/"+(t||DEFAULT_WIDGET)))(r)},exports.createController=function(e,t){return new(require("alloy/controllers/"+e))(t)},exports.createModel=function(e,t){return new(require("alloy/models/"+ucfirst(e)).Model)(t)},exports.createCollection=function(e,t){return new(require("alloy/models/"+ucfirst(e)).Collection)(t)},exports.isTablet=function(){return Math.min(Ti.Platform.displayCaps.platformHeight,Ti.Platform.displayCaps.platformWidth)>=400}(),exports.isHandheld=!exports.isTablet,exports.Globals={},exports.Models={},exports.Models.instance=function(e){return exports.Models[e]||(exports.Models[e]=exports.createModel(e))},exports.Collections={},exports.Collections.instance=function(e){return exports.Collections[e]||(exports.Collections[e]=exports.createCollection(e))},exports.CFG=require("alloy/CFG"),exports.deepExtend=function(){var e,t,r,n,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},a=2),"object"==typeof s||_.isFunction(s)||(s={});l>a;a++)if(e=arguments[a],null!=e){"string"==typeof e&&(e=e.split(""));for(t in e)r=s[t],n=e[t],s!==n&&(u&&n&&!_.isFunction(n)&&_.isObject(n)&&((i=_.isArray(n))||!_.has(n,"apiName"))?(i?(i=!1,o=r&&_.isArray(r)?r:[]):o=_.isDate(n)?new Date(n.valueOf()):r&&_.isObject(r)?r:{},s[t]=exports.deepExtend(u,o,n)):s[t]=n)}return s};