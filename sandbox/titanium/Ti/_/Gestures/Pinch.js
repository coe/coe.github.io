define(["Ti/_/declare","Ti/_/lang"],function(e,a){function t(e){if(i&&2==i.length&&2==e.touches.length){var a=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),t=0,n=Date.now();return o&&(t=Math.abs(o/s-a/s)/((n-r)/1e3)),o=a,r=n,{pinch:[{scale:a/s,velocity:t}]}}}var i=null,n=null,s=null,o=null,r=null,_=100;return a.setObject("Ti._.Gestures.Pinch",{processTouchStartEvent:function(e){var a=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,o=e.touches.length,r=e.changedTouches.length;1==o&&1==r?(i=[{x:a,y:t}],n=setTimeout(function(){i=null},_)):2==o&&1==r?(clearTimeout(n),i&&(i.push({x:a,y:t}),s=Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2)))):2==o&&2==r?(i=[{x:a,y:t},{x:e.changedTouches[1].clientX,y:e.changedTouches[1].clientY}],s=Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2))):i=null},processTouchEndEvent:function(e){var a=t(e);return i=null,a},processTouchMoveEvent:function(e){return t(e)},processTouchCancelEvent:function(){i=null}})});