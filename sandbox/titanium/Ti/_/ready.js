define(function(){function e(e){if(!(o||e&&"readystatechange"==e.type&&!s[i.readyState])){for(;r.length;)r.shift()();o=1}}function a(){s[i.readyState]?e():setTimeout(a,30)}function t(e,a,t){var i,n,s;if(require.is(e,"Number")||(t=a,a=e,e=1e3),i=t?function(){t.call(a)}:a,o)i();else{for(i.priority=e,n=0,s=r.length;s>n&&e>=r[n].priority;n++);r.splice(n,0,i)}}var i=document,n=require.on,s={loaded:1,complete:1},o=!!s[i.readyState],r=[];return o||(r.concat([n(i,"DOMContentLoaded",e),n(window,"load",e)]),"onreadystatechange"in i?r.push(require.on(i,"readystatechange",e)):a()),t.load=function(e,a,i){t(i)},t});