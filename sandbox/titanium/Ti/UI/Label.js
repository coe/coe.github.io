define(["Ti/_/declare","Ti/_/UI/FontWidget","Ti/_/dom","Ti/_/css","Ti/_/style","Ti/_/lang","Ti/Locale","Ti/UI"],function(e,a,t,i,n,s,o,r){var _=n.set,l=t.unitize,d=2,c={post:"_setText"};return e("Ti.UI.Label",a,{constructor:function(){this._add(this._textContainer=r.createView({width:r.INHERIT,height:r.SIZE,center:{y:"50%"}}));var e=this,a=this._textContainerDomNode=this._textContainer.domNode;e._textContainer._getContentSize=function(t){var i=e._textContainerDomNode.innerHTML,n=e._measureText(i,a,e._hasSizeWidth()?void 0:t);return{width:n.width,height:n.height}},this._addStyleableDomNode(a),this.wordWrap=!0},_defaultWidth:r.SIZE,_defaultHeight:r.SIZE,_getText:function(){var e,a,t=0,i=0,n=o._getString(this.textid,this.text);if(void 0===n)return"";for(n+="";n.length>i;)if("	"===n[i]){var s="",r=d-a%d;for(e=0;r>e;e++)s+="&nbsp;";n=n.substring(0,i)+s+n.substring(i+1),i+=s.length,a+=r}else"\n"===n[i]?(n=n.substring(0,i)+"<br/>"+n.substring(i+1),i+=5,t=i,a=0):(i++,a++);return n.match(/<br\/>$/)&&(n+="&nbsp;"),n},_setText:function(){this._textContainerDomNode.innerHTML=this._getText(),this._triggerLayout()},_setTextShadow:function(){var e=this.shadowColor&&""!==this.shadowColor?this.shadowColor:void 0;_(this._textContainerDomNode,"textShadow",this.shadowOffset||e?(this.shadowOffset?l(this.shadowOffset.x)+" "+l(this.shadowOffset.y):"0px 0px")+" 0.1em "+s.val(e,"black"):"")},properties:{ellipsize:{set:function(e){return _(this._textContainerDomNode,"textOverflow",e?"ellipsis":"clip"),e},value:!0},html:{set:function(e){return this._textContainerDomNode.innerHTML=e,this._hasSizeDimensions()&&this._triggerLayout(),e}},shadowColor:{post:function(){this._setTextShadow()}},shadowOffset:{post:function(){this._setTextShadow()}},text:c,textAlign:{set:function(e){return _(this._textContainerDomNode,"textAlign",/(center|right)/.test(e)?e:"left"),e}},textid:c,wordWrap:{set:function(e){return _(this._textContainerDomNode,"whiteSpace",e?"normal":"nowrap"),e}},verticalAlign:{set:function(e){var a,t,i=this.center||{},n=this._textContainer;switch(e){case r.TEXT_VERTICAL_ALIGNMENT_TOP:a=0;break;case r.TEXT_VERTICAL_ALIGNMENT_CENTER:i.y="50%";break;case r.TEXT_VERTICAL_ALIGNMENT_BOTTOM:t=0}return n.top=a,n.center=i,n.bottom=t,e},value:r.TEXT_VERTICAL_ALIGNMENT_CENTER}}})});