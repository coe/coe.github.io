define(["Ti/_/Evented","Ti/_/lang","Ti/UI","Ti/_/ready"],function(e,t,i,r){function n(){var e=!!(window.innerWidth&&window.innerWidth>window.innerHeight);return d.constants.__values__.orientation=e?i.LANDSCAPE_LEFT:i.PORTRAIT,d.constants.__values__.landscape=e,d.constants.__values__.portrait=!e,d.orientation}function o(e){var t=null,r=Math.abs(e.beta||0|e.y),n=Math.abs(e.gamma||0|e.x);5>r&&n>170&&(t=i.FACE_DOWN),5>r&&5>n&&(t=i.FACE_UP),r>50&&0>r&&l!=t&&(t=i.UPSIDE_PORTRAIT),null!==t&&l!==t&&d.fireEvent("orientationchange",{orientation:l=t,source:e.source})}var a=window,s=require.on,l=null,u=Date.now(),c={},d=t.setObject("Ti.Gesture",e,{_updateOrientation:function(){n(),l!==d.orientation&&d.fireEvent("orientationchange",{orientation:l=d.orientation})},isLandscape:function(){return d.landscape},isPortrait:function(){return d.portrait},constants:{portrait:!1,landscape:!1,orientation:i.UNKNOWN}});return r(function(){n()}),s(a,"MozOrientation",o),s(a,"deviceorientation",o),s(a,"devicemotion",function(e){var t,i,r,n,o=e.acceleration||e.accelerationIncludingGravity,a=o&&{x:o.x,y:o.y,z:o.z,source:e.source};a&&(void 0!==c.x&&(t=Math.abs(c.x-a.x)>10,i=Math.abs(c.y-a.y)>10,r=Math.abs(c.z-a.z)>10,(t&&(i||r)||i&&r)&&(n=Date.now(),(a.timestamp=n-u)>300&&(u=n,d.fireEvent("shake",a)))),c=a)}),d});