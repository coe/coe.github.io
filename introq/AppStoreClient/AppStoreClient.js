var AppStoreClient;String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},module.exports=AppStoreClient=function(){function t(){}var e,n,r,o,i,l,a,u;return t.name="AppStoreClient",n="http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/wa/wsSearch?",e="http://play.google.com/store/search?q=tsuyoshi+hyuga",o=n,l=function(t){var e,n,r,o,i,l,a,u,s,m,c,p,g,f,d,h;e=[],u="";try{for(n=t.documentElement,i=n.getElementsByTagName("entry"),o=c=0,f=i.length;f>=0?f>c:c>f;o=f>=0?++c:--c){for(a={},r=i.item(o),a.trackName=r.getElementsByTagName("im:name").item(0).textContent,a.artistName=r.getElementsByTagName("im:artist").item(0).textContent,s=null,l=p=0,d=r.getElementsByTagName("im:image").length;d>=0?d>p:p>d;l=d>=0?++p:--p)s=r.getElementsByTagName("im:image").item(l).textContent;for(a.artworkUrl100=s,l=g=0,h=r.getElementsByTagName("link").length;h>=0?h>g:g>h;l=h>=0?++g:--g)m=r.getElementsByTagName("link").item(l).getAttribute("type"),"audio/x-m4a"===m&&(a.previewUrl=r.getElementsByTagName("link").item(l).getAttribute("href"));a.trackViewUrl=r.getElementsByTagName("id").item(0).textContent,e.push(a)}return e}catch(y){return alert(y)}},a=function(t){var e,n,r,o,i;if(e=decodeURIComponent,i={},r=void 0,t===void 0)return i;for(t.indexOf("?",0)>-1&&(t=t.split("?")[1]),t=t.split("&"),n=0;t.length>n;)r=t[n].split("="),""!==r[0]&&(o=r[1]===void 0?!0:e(r[1])),i[r[0]]=o,n++;return i},u=function(t){var e,n,r,o;if(n=encodeURIComponent,o="",e="",!t)return"";for(r in t)o=o+e+r+"="+n(t[r]),e="&";return o},r=["GB","IT","FI","RU","AE","PK","BD","ID","PH","JP","AU","NC","NZ","TO","TO","US","US","US","US","US","CL","BR","BR","GL"],t.getTzOff=function(){var t;return""!==Ti.Locale.getCurrentCountry()?Ti.Locale.getCurrentCountry():(t=new Date,r[(t.getHours()-t.getUTCHours()+24)%24])},i=function(t){return{onerror:t,onreadystatechange:function(){},onsendstream:function(){},ondatastream:function(){},timeout:5e3}},t.getItunesRssData=function(t,e,n){var r,o,a,u,s,m,c;return a=null!=(m=null!=n?n.country:void 0)?m:require("AppStoreClient/AppStoreClient").getTzOff(),u=null!=(c=null!=n?n.limit:void 0)?c:200,s="https://itunes.apple.com/"+a.toLowerCase()+("/rss/topsongs/limit="+u+"/explicit=true/xml"),o=i(e),o.onload=function(){return t(l(this.responseXML))},r=Ti.Network.createHTTPClient(o),r.open("GET",s),r.send()},t.getItunesRssDataYql=function(t,e,n){var r,o,i,l,a,u;return r=null!=(a=null!=n?n.country:void 0)?a:require("AppStoreClient/AppStoreClient").getTzOff(),o=null!=(u=null!=n?n.limit:void 0)?u:200,l="https://itunes.apple.com/"+r.toLowerCase()+("/rss/topsongs/limit="+o+"/explicit=true/xml"),i='select * from xml where url="'+l+'"',Ti.Yahoo.yql(i,function(r){var o,i,l,a,u,s,m,c,p,g,f;return r.success&&null!=r.data?(o=null!=(p=null!=(g=r.data)?null!=(f=g.feed)?f.entry:void 0:void 0)?p:[],s=function(){var t,e,r,s,p,g,f,d,h,y,T,v;for(v=[],t=0,s=o.length;s>t;t++){for(l=o[t],n={},n.trackName=l.name,n.artistName=null!=(f=null!=(d=l.artist)?d.content:void 0)?f:"",c=null,m=0,h=l.image,e=0,p=h.length;p>e;e++)i=h[e],u=i.height-0,u>m&&(m=u,n.artworkUrl100=i.content);for(y=l.link,r=0,g=y.length;g>r;r++)a=y[r],"preview"===a.assetType&&(n.previewUrl=a.href);n.trackViewUrl=null!=(T=l.id)?T.content:void 0,v.push(n)}return v}(),t(s)):e(r)})},t.getItunesData=function(t,e,r){var o,i,l,a,s;return l=require("AppStoreClient/AppStoreClient").getTzOff(),o=null==r?n+("term=tsuyoshi+hyuga&country="+l+"&media=software&entity=software"):(null!=(s=r.country)?s:r.country=l,n+u(r)),a=o,i=Ti.Network.createHTTPClient({onload:function(){var e,n;return n=JSON.parse(this.responseText),e=n.results,t(e,n.resultCount)},onerror:e,onreadystatechange:function(){},onsendstream:function(){},ondatastream:function(){},timeout:5e3}),i.open("GET",a),i.send()},t}();