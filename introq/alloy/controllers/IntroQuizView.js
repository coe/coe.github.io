function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="IntroQuizView",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var t=this,e={},i={};t.__views.win=Ti.UI.createWindow({backgroundColor:"#fff",id:"win"}),t.__views.win&&t.addTopLevelView(t.__views.win),h?t.__views.win.addEventListener("close",h):i["$.__views.win!close!closeWindow"]=!0,t.__views.loading_view=Ti.UI.createView({id:"loading_view"}),t.__views.win.add(t.__views.loading_view),t.__views.loading=Alloy.createWidget("com.appcelerator.loading","widget",{id:"loading",__parentSymbol:t.__views.loading_view}),t.__views.loading.setParent(t.__views.loading_view),t.__views.__alloyId0=Ti.UI.createView({id:"__alloyId0"}),t.__views.win.add(t.__views.__alloyId0),t.__views.artist_view=Ti.UI.createView({bottom:Alloy.Globals.Style.game_view_height,id:"artist_view"}),t.__views.__alloyId0.add(t.__views.artist_view),t.__views.artisgt_image=Ti.UI.createImageView({height:100,width:100,defaultImage:Alloy.Globals.NullImage,image:Alloy.Globals.NullImage,id:"artisgt_image"}),t.__views.artist_view.add(t.__views.artisgt_image),t.__views.artist=Ti.UI.createLabel(function(){var t={};return _.extend(t,{width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"black",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center"}),Alloy.isTablet&&_.extend(t,{font:{fontSize:32}}),_.extend(t,{top:0,text:"artist",id:"artist"}),t}()),t.__views.artist_view.add(t.__views.artist),t.__views.title=Ti.UI.createLabel(function(){var t={};return _.extend(t,{width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"black",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center"}),Alloy.isTablet&&_.extend(t,{font:{fontSize:32}}),_.extend(t,{bottom:0,text:"title",id:"title"}),t}()),t.__views.artist_view.add(t.__views.title),t.__views.button_view=Ti.UI.createView({height:Alloy.Globals.Style.game_view_height,bottom:0,visible:!1,id:"button_view"}),t.__views.__alloyId0.add(t.__views.button_view),t.__views.replay_button=Ti.UI.createButton(function(){var t={};return _.extend(t,{}),Alloy.isTablet&&_.extend(t,{font:{fontSize:32}}),_.extend(t,{bottom:0,height:Alloy.Globals.Style.game_view_height,width:100,right:0,title:"NEXT",id:"replay_button"}),t}()),t.__views.button_view.add(t.__views.replay_button),c?t.__views.replay_button.addEventListener("click",c):i["$.__views.replay_button!click!clickReplay"]=!0,t.__views.itunes_button=Ti.UI.createButton(function(){var t={};return _.extend(t,{}),Alloy.isTablet&&_.extend(t,{font:{fontSize:32}}),_.extend(t,{backgroundImage:"/images/available_on_itunes_badge_us_uk_110_40_0824.png",left:0,width:110,height:40,id:"itunes_button"}),t}()),t.__views.button_view.add(t.__views.itunes_button),a?t.__views.itunes_button.addEventListener("click",a):i["$.__views.itunes_button!click!clickItunes"]=!0,e.destroy=function(){},_.extend(t,t.__views);var r,n,s,o,a,l,u,c,h,d,p,f,g,v,m,y,T,w,A;n=arguments[0]||{},y=null,m=null,T=null,A=!1,g=function(e){return t.loading_view.visible=e,e?t.loading.setOpacity(1):t.loading.setOpacity(0)},p=function(){return alert("error"),g(!1)},r=require("MobileAudioPlayerClass"),s=new r(""),d=function(){s.stop()},f=function(t){return Ti.API.debug("data.previewUrl "+t.previewUrl),(s.playing||s.paused)&&d(),s.url=t.previewUrl,s.start()},u=function(){return t.clickPlayFunc()},e.clickPlayFunc=function(){return null!=y?f(y[Math.floor(Math.random()*y.length)]):void 0},l=function(){s.paused?s.start():s.pause()},s.addEventListener("progress",function(e){Ti.API.info("Time Played: "+Math.round(e.progress)+" milliseconds"),Math.round(e.progress)>1e3&&!t.button_view.visible&&!A&&v()}),s.addEventListener("change",function(e){Ti.API.info("State: "+e.description+" ("+e.state+")"),s.STATE_STARTING!==e.state||t.button_view.visible||"undefined"!=typeof pv&&null!==pv&&pv.show({text:"loading"},"loading")}),h=function(){s.stop()},w=null,e.isSeikai=function(t){return null!=t&&(w=t),_.isEqual(m[w.index],T)},e.selectAnswer=function(e){var i,r,n,o;return r=null,r=t.isSeikai(e)?"/se/seikai.wav":"/se/hazure.wav",i=require("MobileCreateSound"),n=new i({url:r}),n.play(),t.artist.text=T.artistName,t.title.text=T.trackName,t.artisgt_image.image=T.artworkUrl100,s.start(),null!=(o=t.hayaoshi_button)&&(o.visible=!1),t.button_view.visible=!0,t.selectAnswerExtends(),A=!1},e.selectAnswerExtends=function(){},o=function(){},v=function(){var e;A||(A=!0,"undefined"!=typeof pv&&null!==pv&&pv.hide(),e=Ti.UI.createAlertDialog({buttonNames:_.pluck(m,"trackName"),title:"Enter text"}),e.addEventListener("click",t.selectAnswer),e.show(),d())},e.clickReplayFunc=function(){var e;return null!=(e=t.hayaoshi_button)&&(e.visible=!0),t.button_view.visible=!1,t.startMusic()},c=function(){return t.clickReplayFunc()},e.startMusic=function(){var e,i;for(m=[],e=i=0;4>i;e=++i)m.push(y[Math.floor(Math.random()*y.length)]);return t.artist.text=t.title.text="",t.artisgt_image.image=Alloy.Globals.NullImage,T=m[Math.floor(Math.random()*m.length)],f(T)},a=function(){return Ti.Platform.openURL(T.trackViewUrl+"&at=11lGpg")},function(){var e;return g(!0),t.win.title=L("Play","Play"),e=require("AppStoreClient/AppStoreClient"),e.getItunesRssDataYql(function(e){return y=e,g(!1),t.startMusic()},p,{term:"AKB48",media:"music",entity:"song",country:require("AppStoreClient/AppStoreClient").getTzOff(),limit:200})}(),i["$.__views.win!close!closeWindow"]&&t.__views.win.addEventListener("close",h),i["$.__views.replay_button!click!clickReplay"]&&t.__views.replay_button.addEventListener("click",c),i["$.__views.itunes_button!click!clickItunes"]&&t.__views.itunes_button.addEventListener("click",a),_.extend(t,e)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;