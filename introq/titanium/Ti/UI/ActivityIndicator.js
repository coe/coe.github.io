define(["Ti/_/declare","Ti/_/lang","Ti/_/UI/Widget","Ti/_/dom","Ti/_/style","Ti/Locale","Ti/UI","Ti/UI/ActivityIndicatorStyle"],function(e,a,t,i,n,s,o,r){var _=.3,l=n.set;return e("Ti.UI.ActivityIndicator",t,{constructor:function(){var e=this._contentContainer=o.createView({layout:o._LAYOUT_CONSTRAINING_HORIZONTAL,width:o.SIZE,height:o.SIZE});this._add(e),t.prototype.hide.call(this),e._add(this._indicatorIndicator=o.createView()),e._add(this._indicatorMessage=o.createLabel()),this._createProngs()},_createProngs:function(){var e,a=0,t=this._prongs=[],n=this._indicatorIndicator,s=n.domNode,o=this.indicatorColor,r=this.indicatorDiameter,l=r/36;for(n.width=n.height=r;s.firstChild;)s.removeChild(s.firstChild);for(e=i.create("div",{className:"TiUIActivityIndicatorProngContainer",style:{transformOrigin:"0px 0px",transform:"scale("+l+")"}},s);12>a;a++)t.push(i.create("div",{className:"TiUIActivityIndicatorProng",style:{transform:"translate(16px,0px) rotate("+30*a+"deg)",transformOrigin:"2px 18px",opacity:_,backgroundColor:o}},e))},show:function(){t.prototype.show.call(this),this._timer=setInterval(a.hitch(this,"_animate"),100)},hide:function(){clearTimeout(this._timer),t.prototype.hide.call(this)},_currentProng:0,_animate:function(){var e=this._prongs[this._currentProng];12==++this._currentProng&&(this._currentProng=0),l(e,"transition",""),setTimeout(function(){l(e,"opacity",1),setTimeout(function(){l(e,"transition","opacity 500ms linear 0ms"),setTimeout(function(){l(e,"opacity",_)},1)},1)},1)},_defaultWidth:o.SIZE,_defaultHeight:o.SIZE,_messagePadding:0,properties:{color:{set:function(e){return this._indicatorMessage.color=e}},font:{set:function(e){return this._indicatorMessage.font=e}},indicatorColor:{post:"_createProngs",value:"#fff"},indicatorDiameter:{post:"_createProngs",value:36},message:{set:function(e){var a=this._indicatorMessage;return a.left=e?5:0,a.text=e}},messageid:{set:function(e){var a=this._indicatorMessage;return a.left=e?5:0,a.textid=e}},style:{set:function(e){this.indicatorColor=~[r.DARK,r.BIG_DARK].indexOf(e)?"#444":"#fff",this.indicatorDiameter=~[r.BIG,r.BIG_DARK].indexOf(e)?72:36}}}})});