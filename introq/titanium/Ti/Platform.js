define(["Ti/_","Ti/_/browser","Ti/_/Evented","Ti/_/lang","Ti/Locale","Ti/_/dom","Ti/UI"],function(e,a,t,i,n,s,o){function r(){_||(_=1,l.cookie=d+"="+encodeURIComponent(u)+"; expires="+new Date(Date.now()+63072e7).toUTCString(),localStorage.setItem(d,u))}var _,l=document,d="ti:mid",c=l.cookie.match(RegExp("(?:^|; )"+d+"=([^;]*)")),u=c?decodeURIComponent(c[1]):void 0,p=require.on,m=s.create("iframe",{id:"urlOpener",style:{display:"none"}},l.body);u||(u=localStorage.getItem(d)),u||localStorage.setItem(d,u=e.uuid()),p(window,"beforeunload",r),p(window,"unload",r);var g=navigator,k=g.battery||g.webkitBattery||g.mozBattery,b=i.setObject("Ti.Platform",t,{canOpenURL:function(e){return!!e},createUUID:e.uuid,is24HourTimeFormat:function(){return!1},openURL:function(e){if(/^([tel|sms|mailto])/.test(e))m.contentWindow.location.href=e;else{var a=o.createWindow({layout:o._LAYOUT_CONSTRAINING_VERTICAL,backgroundColor:"#888"}),t=o.createButton({top:2,bottom:2,title:"Close"}),i=o.createWebView({width:o.FILL,height:o.FILL});t.addEventListener("singletap",function(){a.close()}),a.add(t),a.add(i),a.open(),setTimeout(function(){i.url=e},1)}},properties:{batteryMonitoring:!1},constants:{BATTERY_STATE_CHARGING:1,BATTERY_STATE_FULL:2,BATTERY_STATE_UNKNOWN:-1,BATTERY_STATE_UNPLUGGED:0,address:void 0,architecture:void 0,availableMemory:void 0,batteryLevel:function(){return this.batteryMonitoring&&k?100*k.level:-1},batteryState:function(){return this.batteryMonitoring&&k&&k.charging?this.BATTERY_STATE_CHARGING:this.BATTERY_STATE_UNKNOWN},isBrowser:!0,id:u,locale:n,macaddress:void 0,model:g.userAgent,name:"mobileweb",netmask:void 0,osname:"mobileweb",ostype:g.platform,runtime:a.runtime,processorCount:void 0,username:void 0,version:require.config.ti.version}});return k&&require.on(k,"chargingchange",function(){b.batteryMonitoring&&b.fireEvent("battery",{level:b.batteryLevel,state:b.batteryState})}),b});