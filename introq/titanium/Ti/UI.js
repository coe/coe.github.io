define(["Ti/_","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/_/dom","Ti/_/event","Ti/_/has","Ti/_/Gestures/DoubleTap","Ti/_/Gestures/Dragging","Ti/_/Gestures/LongPress","Ti/_/Gestures/Pinch","Ti/_/Gestures/SingleTap","Ti/_/Gestures/Swipe","Ti/_/Gestures/TouchCancel","Ti/_/Gestures/TouchEnd","Ti/_/Gestures/TouchMove","Ti/_/Gestures/TouchStart","Ti/_/Gestures/TwoFingerTap"],function(e,a,t,i,n,s,o,r,t,_,l,d,c,u,p,m,g,k,b,h){var y,f,v,w=window,z=document,S=z.body,j=require.on,P=require.is,A="2DMatrix,ActivityIndicator,AlertDialog,Animation,Button,EmailDialog,ImageView,Label,OptionDialog,Picker,PickerColumn,PickerRow,ProgressBar,ScrollableView,ScrollView,Slider,Switch,Tab,TabGroup,TableView,TableViewRow,TableViewSection,TextArea,TextField,View,WebView,Window",T={},I=s.set,x=navigator.userAgent.toLowerCase().match(/(iphone|android)/),M=x&&"iphone"===x[0],N={},D=function(){Ti.UI._recalculateLayout(),y=0},C=D,B=o.unitize,W=[b,g,k,m,l,u,_,d,c,p,h];return j(S,"touchmove",function(e){e.preventDefault()}),A.split(",").forEach(function(e){T["create"+e]=function(a){return new(require("Ti/UI/"+e))(a)}}),!navigator.standalone&&x&&(C=function(){if(!y){y=1;var e,a=0|require("Ti/Gesture").isPortrait,t=N[a];t||(M?(t=w.innerHeight+60,w.screen.availHeight-t>50&&(t+=50)):t=w.outerHeight/(w.devicePixelRatio||0),N[a]=t),I(S,"height",t+"px"),M?(w.scrollTo(0,0),D()):e=setInterval(function(){w.scrollTo(0,-1),w.innerHeight+1>=t&&(clearTimeout(e),D())},50)}},n(C),j(w,"orientationchange",C),j(w,"touchstart",C)),n(10,function(){setTimeout(function(){function e(e,a){var t,i,n,o=0,r=W.length,_=[],l=a._elements;if(l&&l.length){for(s||require.mix(a,{touches:"mouseup"===a.type?[]:[a],targetTouches:[],changedTouches:[a]});r>o;o++)if(n=W[o]["process"+e]){i=n(a,l);for(t in i)_[t]||(_[t]=[]),_[t]=_[t].concat(i[t])}Ti.UI._fireGestureEvents(_,l)}}var a=Ti.UI._container=Ti.UI.createView({left:0,top:0}),i=a.domNode,n=a._layoutCoefficients,s=t("touch"),o=0;n.width.x1=1,n.height.x1=1,a._measuredTop=0,a._measuredLeft=0,i.id="TiUIContainer",I(i,"overflow","hidden"),S.appendChild(i),(f=z.getElementById("splash"))&&a.addEventListener("postlayout",function(){setTimeout(function(){I(f,{position:"absolute",width:B(a._measuredWidth),height:B(a._measuredHeight),left:0,top:0,right:"",bottom:""})},10)}),C(),j(i,s?"touchstart":"mousedown",function(a){var t=[j(w,s?"touchmove":"mousemove",function(a){(s||o)&&e("TouchMoveEvent",a)}),j(w,s?"touchend":"mouseup",function(a){o=0,e("TouchEndEvent",a),r.off(t)}),s&&j(w,"touchcancel",function(a){e("TouchCancelEvent",a),r.off(t)})];o=1,e("TouchStartEvent",a)})},1)}),j(w,"resize",function(){Ti.UI._recalculateLayout()}),i.setObject("Ti.UI",a,T,{_addWindow:function(e,a){return this._container.add(e.modal?e._modalParentContainer:e),a&&this._setWindow(e),f&&o.destroy(f),e},_setWindow:function(e){this.constants.currentWindow=e},_removeWindow:function(e){return this._container.remove(e.modal?e._modalParentContainer:e),e},_fireGestureEvents:function(e,a){for(var t,i,n,s,o,r=0,_=W.length,l=0;a[l]&&!a[l]._isPublished;)l++;a[l]||(l=0);for(r in e)for(t=0,_=e[r].length;_>t;t++)o=e[r][t],P(o.x,"Number")&&P(o.y,"Number")?(s=this._container.convertPointToView({x:o.x,y:o.y},a[l]),i=s?s.x:o.x,n=s?s.y:o.y):i=n=void 0,o.x=i,o.y=n,o.bubbles=!0,o.cancelBubble=!1,a[0].fireEvent(r,o)},_layoutSemaphore:0,_nodesToLayout:[],_startLayout:function(){this._layoutSemaphore++},_finishLayout:function(){0===--this._layoutSemaphore&&this._triggerLayout(!0)},_elementLayoutCount:0,_triggerLayout:function(e,a){function i(){n._elementLayoutCount=0;var e,a,i,s,o,r,_,l,d,c,u=n._nodesToLayout,p=[],m=!1,g=n._container,k=u.length;for(t("ti-instrumentation")&&(n._layoutInstrumentationTest=instrumentation.startTest("Layout")),d=0;k>d;d++)if(e=u[d],e._isAttachedToActiveWin()){for(_=[e];_.length>0;){a=_.pop(),a._markedForLayout=!0,o=a._children;for(c in o)r=o[c],("composite"!==a.layout||r._needsMeasuring||a._layout._isDependentOnParent(r))&&_.push(r)}if(e===g)m=!0;else for(i=e;;){if(i._markedForLayout=!0,s=i,i=i._parent,l=!1,!i||i===g){m=!0;break}for(i._hasSizeDimensions()||i._needsMeasuring||(!i._markedForLayout&&!~p.indexOf(i)&&p.push(i),l=!0),_=[i];_.length>0;){a=_.pop(),o=a._children;for(c in o)r=o[c],r!==s&&("composite"!==a.layout||r._needsMeasuring||a._layout._isDependentOnParent(r))&&(r._markedForLayout=!0,_.push(r))}if(l)break}}if(m){var b=g.properties.__values__,h=g._measuredWidth=b.width=w.innerWidth,y=g._measuredHeight=b.height=w.innerHeight;g._measuredSandboxWidth=h,g._measuredSandboxHeight=y,g.fireEvent("postlayout"),I(g.domNode,{width:h+"px",height:y+"px"}),g._layout._doLayout(g,h,y,!1,!1)}for(d=0;p.length>d;d++)a=p[d],a._layout._doLayout(a,a._measuredWidth-a._borderLeftWidth-a._borderRightWidth,a._measuredHeight-a._borderTopWidth-a._borderBottomWidth,a._parent._layout._getWidth(a,a.width)===Ti.UI.SIZE,a._parent._layout._getHeight(a,a.height)===Ti.UI.SIZE);t("ti-instrumentation")&&instrumentation.stopTest(n._layoutInstrumentationTest,n._elementLayoutCount+" out of approximately "+document.getElementById("TiUIContainer").getElementsByTagName("*").length+" elements laid out."),n._layoutInProgress=!1,n._layoutTimer=null,n._nodesToLayout=[],n.fireEvent("postlayout")}var n=this;~n._nodesToLayout.indexOf(e)||(n._nodesToLayout.push(e),a?(clearTimeout(n._layoutTimer),n._layoutInProgress=!0,i()):1===n._nodesToLayout.length&&(n._layoutInProgress=!0,n._layoutTimer=setTimeout(i,10)))},_recalculateLayout:function(){v||(v=require("Ti/Gesture")),v._updateOrientation();var e=this._container;e&&(e.width=w.innerWidth,e.height=w.innerHeight)},properties:{backgroundColor:{set:function(e){return this._container.backgroundColor=e}},backgroundImage:{set:function(e){return I(S,"backgroundImage",e?s.url(e):"")}},currentTab:void 0},convertUnits:function(a,t){var i=o.computeSize(a,0,!1);switch(t){case Ti.UI.UNIT_MM:i*=10;case Ti.UI.UNIT_CM:return i/(10*.0393700787*e.dpi);case Ti.UI.UNIT_IN:return i/e.dpi;case Ti.UI.UNIT_DIP:return 96*i/e.dpi;case Ti.UI.UNIT_PX:return i;default:return 0}},constants:{currentWindow:void 0,UNKNOWN:0,FACE_DOWN:1,FACE_UP:2,PORTRAIT:3,UPSIDE_PORTRAIT:4,LANDSCAPE_LEFT:5,LANDSCAPE_RIGHT:6,INPUT_BORDERSTYLE_NONE:0,INPUT_BORDERSTYLE_LINE:1,INPUT_BORDERSTYLE_BEZEL:2,INPUT_BORDERSTYLE_ROUNDED:3,KEYBOARD_DEFAULT:2,KEYBOARD_EMAIL:3,KEYBOARD_NUMBER_PAD:6,KEYBOARD_PHONE_PAD:7,KEYBOARD_URL:8,NOTIFICATION_DURATION_LONG:1,NOTIFICATION_DURATION_SHORT:2,PICKER_TYPE_DATE:2,PICKER_TYPE_DATE_AND_TIME:3,PICKER_TYPE_PLAIN:4,PICKER_TYPE_TIME:5,RETURNKEY_DEFAULT:0,RETURNKEY_DONE:1,RETURNKEY_EMERGENCY_CALL:2,RETURNKEY_GO:3,RETURNKEY_GOOGLE:4,RETURNKEY_JOIN:5,RETURNKEY_NEXT:6,RETURNKEY_ROUTE:7,RETURNKEY_SEARCH:8,RETURNKEY_SEND:9,RETURNKEY_YAHOO:10,TEXT_ALIGNMENT_CENTER:"center",TEXT_ALIGNMENT_RIGHT:"right",TEXT_ALIGNMENT_LEFT:"left",TEXT_AUTOCAPITALIZATION_ALL:3,TEXT_AUTOCAPITALIZATION_NONE:0,TEXT_AUTOCAPITALIZATION_SENTENCES:2,TEXT_AUTOCAPITALIZATION_WORDS:1,TEXT_VERTICAL_ALIGNMENT_BOTTOM:"bottom",TEXT_VERTICAL_ALIGNMENT_CENTER:"center",TEXT_VERTICAL_ALIGNMENT_TOP:"top",ANIMATION_CURVE_EASE_IN:1,ANIMATION_CURVE_EASE_IN_OUT:0,ANIMATION_CURVE_EASE_OUT:2,ANIMATION_CURVE_LINEAR:3,SIZE:"auto",FILL:"fill",INHERIT:"inherit",UNIT_PX:"px",UNIT_MM:"mm",UNIT_CM:"cm",UNIT_IN:"in",UNIT_DIP:"dp",_LAYOUT_COMPOSITE:"composite",_LAYOUT_VERTICAL:"vertical",_LAYOUT_HORIZONTAL:"horizontal",_LAYOUT_CONSTRAINING_VERTICAL:"constrainingVertical",_LAYOUT_CONSTRAINING_HORIZONTAL:"constrainingHorizontal"}})});