define(["Ti/_/declare","Ti/_/lang"],function(e,a){function t(e){var a;return n?(a=i(e),n=null,{draggingcancel:a}):void 0}function i(e){var a=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,i=a-n.x,s=t-n.y;return[{x:a,y:t,distanceX:i,distanceY:s,distance:Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}]}var n,s=25;return a.setObject("Ti._.Gestures.Drag",{processTouchStartEvent:function(e){if(1==e.touches.length&&1==e.changedTouches.length){var a,s;return n={x:a=e.changedTouches[0].clientX,y:s=e.changedTouches[0].clientY},{draggingstart:i(e)}}return n?t(e):void 0},processTouchEndEvent:function(e){if(n){var a,o=Math.sqrt(Math.pow(e.changedTouches[0].clientX-n.x,2)+Math.pow(e.changedTouches[0].clientY-n.y,2));return 0===e.touches.length&&1===e.changedTouches.length&&o>s?(a=i(e),n=null,{draggingend:a}):t(e)}},processTouchMoveEvent:function(e){return n?1==e.touches.length&&1==e.changedTouches.length?{dragging:i(e)}:t(e):void 0},processTouchCancelEvent:function(e){return n&&t(e)}})});