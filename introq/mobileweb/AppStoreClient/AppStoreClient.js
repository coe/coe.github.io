var AppStoreClient;String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},module.exports=AppStoreClient=function(){function e(){}var t,i,n,r,o,a,l,s;return e.name="AppStoreClient",i="http://ax.itunes.apple.com/WebObjects/MZStoreServices.woa/wa/wsSearch?",t="http://play.google.com/store/search?q=tsuyoshi+hyuga",r=i,a=function(e){var t,i,n,r,o,a,l,s,u,c,d,p,f,h,_,g;t=[],s="";try{for(i=e.documentElement,o=i.getElementsByTagName("entry"),r=d=0,h=o.length;h>=0?h>d:d>h;r=h>=0?++d:--d){for(l={},n=o.item(r),l.trackName=n.getElementsByTagName("im:name").item(0).textContent,l.artistName=n.getElementsByTagName("im:artist").item(0).textContent,u=null,a=p=0,_=n.getElementsByTagName("im:image").length;_>=0?_>p:p>_;a=_>=0?++p:--p)u=n.getElementsByTagName("im:image").item(a).textContent;for(l.artworkUrl100=u,a=f=0,g=n.getElementsByTagName("link").length;g>=0?g>f:f>g;a=g>=0?++f:--f)c=n.getElementsByTagName("link").item(a).getAttribute("type"),"audio/x-m4a"===c&&(l.previewUrl=n.getElementsByTagName("link").item(a).getAttribute("href"));l.trackViewUrl=n.getElementsByTagName("id").item(0).textContent,t.push(l)}return t}catch(y){return alert(y)}},l=function(e){var t,i,n,r,o;if(t=decodeURIComponent,o={},n=void 0,e===void 0)return o;for(e.indexOf("?",0)>-1&&(e=e.split("?")[1]),e=e.split("&"),i=0;e.length>i;)n=e[i].split("="),""!==n[0]&&(r=n[1]===void 0?!0:t(n[1])),o[n[0]]=r,i++;return o},s=function(e){var t,i,n,r;if(i=encodeURIComponent,r="",t="",!e)return"";for(n in e)r=r+t+n+"="+i(e[n]),t="&";return r},n=["GB","IT","FI","RU","AE","PK","BD","ID","PH","JP","AU","NC","NZ","TO","TO","US","US","US","US","US","CL","BR","BR","GL"],e.getTzOff=function(){var e;return""!==Ti.Locale.getCurrentCountry()?Ti.Locale.getCurrentCountry():(e=new Date,n[(e.getHours()-e.getUTCHours()+24)%24])},o=function(e){return{onerror:e,onreadystatechange:function(){},onsendstream:function(){},ondatastream:function(){},timeout:5e3}},e.getItunesRssData=function(e,t,i){var n,r,l,s,u,c,d;return l=null!=(c=null!=i?i.country:void 0)?c:require("AppStoreClient/AppStoreClient").getTzOff(),s=null!=(d=null!=i?i.limit:void 0)?d:200,u="https://itunes.apple.com/"+l.toLowerCase()+("/rss/topsongs/limit="+s+"/explicit=true/xml"),r=o(t),r.onload=function(){return e(a(this.responseXML))},n=Ti.Network.createHTTPClient(r),n.open("GET",u),n.send()},e.getItunesRssDataYql=function(e,t,i){var n,r,o,a,l,s;return n=null!=(l=null!=i?i.country:void 0)?l:require("AppStoreClient/AppStoreClient").getTzOff(),r=null!=(s=null!=i?i.limit:void 0)?s:200,a="https://itunes.apple.com/"+n.toLowerCase()+("/rss/topsongs/limit="+r+"/explicit=true/xml"),o='select * from xml where url="'+a+'"',Ti.Yahoo.yql(o,function(n){var r,o,a,l,s,u,c,d,p,f,h;return n.success&&null!=n.data?(r=null!=(p=null!=(f=n.data)?null!=(h=f.feed)?h.entry:void 0:void 0)?p:[],u=function(){var e,t,n,u,p,f,h,_,g,y,m,v;for(v=[],e=0,u=r.length;u>e;e++){for(a=r[e],i={},i.trackName=a.name,i.artistName=null!=(h=null!=(_=a.artist)?_.content:void 0)?h:"",d=null,c=0,g=a.image,t=0,p=g.length;p>t;t++)o=g[t],s=o.height-0,s>c&&(c=s,i.artworkUrl100=o.content);for(y=a.link,n=0,f=y.length;f>n;n++)l=y[n],"preview"===l.assetType&&(i.previewUrl=l.href);i.trackViewUrl=null!=(m=a.id)?m.content:void 0,v.push(i)}return v}(),e(u)):t(n)})},e.getItunesData=function(e,t,n){var r,o,a,l,u;return a=require("AppStoreClient/AppStoreClient").getTzOff(),r=null==n?i+("term=tsuyoshi+hyuga&country="+a+"&media=software&entity=software"):(null!=(u=n.country)?u:n.country=a,i+s(n)),l=r,o=Ti.Network.createHTTPClient({onload:function(){var t,i;return i=JSON.parse(this.responseText),t=i.results,e(t,i.resultCount)},onerror:t,onreadystatechange:function(){},onsendstream:function(){},ondatastream:function(){},timeout:5e3}),o.open("GET",l),o.send()},e}();