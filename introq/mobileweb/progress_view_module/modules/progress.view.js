var ProgressView=function(e){var t,i,n,r,o,a,l,s,u=!1,c=e?e.window?e.window:Ti.UI.currentWindow:Ti.UI.currentWindow;(function(){i=Ti.UI.createView({backgroundColor:"transparent",top:0,left:0,width:"100%",height:"100%"}),n=Ti.UI.createView({backgroundColor:"transparent",opacity:1,width:100,height:100}),i.add(n),r=Ti.UI.createView({backgroundColor:"#000",borderRadius:8,opacity:.9,width:100,height:100}),n.add(r),_viewActivityIndicator=Ti.UI.createView({backgroundColor:"transparent",opacity:1,width:"100%",top:0,left:0,right:0,bottom:0}),n.add(_viewActivityIndicator),a=Ti.UI.createImageView({width:28,height:28}),t=null!=Ti.Android?Ti.UI.Android.createProgressIndicator():Ti.UI.createActivityIndicator({style:Titanium.UI.iPhone.ActivityIndicatorStyle.BIG}),_viewActivityIndicator.add(t),o=Ti.UI.createLabel({color:"#FFF",font:{fontSize:14,fontWeight:"bold"},textAlign:"center",left:10,right:10,bottom:10,height:16}),t.show()})(),this.show=function(e){u?(e&&(e.text?t.message=e.text:e.textId&&(t.messageid=e.textId)),c.add(t)):(e&&((e.text||e.textId)&&(_viewActivityIndicator.bottom=20,d(e),l=1,n.add(o)),(1==e.success||1==e.error)&&(s=1,a.image="/modules/"+(1==e.success?"success":"error")+".png",_viewActivityIndicator.remove(t),_viewActivityIndicator.add(a))),i.opacity=0,i.animate({opacity:1,duration:300}),c.add(i))},this.hide=function(){u?t.hide():(i.opacity=1,i.animate({opacity:0,duration:300}),setTimeout(function(){c.remove(i),1==l&&(r.width=n.width=100,_viewActivityIndicator.bottom=0,l=0,n.remove(o)),1==s&&(_viewActivityIndicator.remove(a),_viewActivityIndicator.add(t))},300))},this.change=function(e){!u&&e&&((e.text||e.textId)&&(1==l?d(e):(_viewActivityIndicator.animate({bottom:20,duration:200}),l=1,d(e),n.add(o))),1==e.success||1==e.error?1==s?a.image="/modules/"+(1==e.success?"success":"error")+".png":(s=1,a.image="/modules/"+(1==e.success?"success":"error")+".png",_viewActivityIndicator.remove(t),_viewActivityIndicator.add(a)):1==s&&(_viewActivityIndicator.add(t),_viewActivityIndicator.remove(a)))};var d=function(e){var t=Ti.UI.createLabel({text:e.text?e.text:e.textId,font:{fontSize:14,fontWeight:"bold"},width:"auto"}).toImage().width+20;t>100&&310>t&&(1==l?(n.animate({width:t,duration:200}),r.animate({width:t,duration:200})):n.width=r.width=t),o.text=e.text?e.text:e.textId}};exports=exports||{},exports.ProgressView=ProgressView;