function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="IntroQuizView",arguments[0]?arguments[0].__parentSymbol:null,arguments[0]?arguments[0].$model:null,arguments[0]?arguments[0].__itemTemplate:null;var e=this,t={},i={};e.__views.win=Ti.UI.createWindow({backgroundColor:"#fff",id:"win"}),e.__views.win&&e.addTopLevelView(e.__views.win),d?e.__views.win.addEventListener("close",d):i["$.__views.win!close!closeWindow"]=!0,e.__views.loading_view=Ti.UI.createView({id:"loading_view"}),e.__views.win.add(e.__views.loading_view),e.__views.loading=Alloy.createWidget("com.appcelerator.loading","widget",{id:"loading",__parentSymbol:e.__views.loading_view}),e.__views.loading.setParent(e.__views.loading_view),e.__views.__alloyId0=Ti.UI.createView({id:"__alloyId0"}),e.__views.win.add(e.__views.__alloyId0),e.__views.artist_view=Ti.UI.createView({bottom:Alloy.Globals.Style.game_view_height,id:"artist_view"}),e.__views.__alloyId0.add(e.__views.artist_view),e.__views.artisgt_image=Ti.UI.createImageView({height:100,width:100,defaultImage:Alloy.Globals.NullImage,image:Alloy.Globals.NullImage,id:"artisgt_image"}),e.__views.artist_view.add(e.__views.artisgt_image),e.__views.artist=Ti.UI.createLabel(function(){var e={};return _.extend(e,{width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"black",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center"}),Alloy.isTablet&&_.extend(e,{font:{fontSize:32}}),_.extend(e,{top:0,text:"artist",id:"artist"}),e}()),e.__views.artist_view.add(e.__views.artist),e.__views.title=Ti.UI.createLabel(function(){var e={};return _.extend(e,{width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"black",font:{fontSize:20,fontFamily:"Helvetica Neue"},textAlign:"center"}),Alloy.isTablet&&_.extend(e,{font:{fontSize:32}}),_.extend(e,{bottom:0,text:"title",id:"title"}),e}()),e.__views.artist_view.add(e.__views.title),e.__views.button_view=Ti.UI.createView({height:Alloy.Globals.Style.game_view_height,bottom:0,visible:!1,id:"button_view"}),e.__views.__alloyId0.add(e.__views.button_view),e.__views.replay_button=Ti.UI.createButton(function(){var e={};return _.extend(e,{}),Alloy.isTablet&&_.extend(e,{font:{fontSize:32}}),_.extend(e,{bottom:0,height:Alloy.Globals.Style.game_view_height,width:100,right:0,title:"NEXT",id:"replay_button"}),e}()),e.__views.button_view.add(e.__views.replay_button),c?e.__views.replay_button.addEventListener("click",c):i["$.__views.replay_button!click!clickReplay"]=!0,e.__views.itunes_button=Ti.UI.createButton(function(){var e={};return _.extend(e,{}),Alloy.isTablet&&_.extend(e,{font:{fontSize:32}}),_.extend(e,{backgroundImage:"/images/available_on_itunes_badge_us_uk_110_40_0824.png",left:0,width:110,height:40,id:"itunes_button"}),e}()),e.__views.button_view.add(e.__views.itunes_button),s?e.__views.itunes_button.addEventListener("click",s):i["$.__views.itunes_button!click!clickItunes"]=!0,t.destroy=function(){},_.extend(e,e.__views);var n,r,o,a,s,l,u,c,d,p,h,f,g,y,m,v,w,T,b;r=arguments[0]||{},v=null,m=null,w=null,b=!1,g=function(t){return e.loading_view.visible=t,t?e.loading.setOpacity(1):e.loading.setOpacity(0)},h=function(){return alert("error"),g(!1)},n=require("MobileAudioPlayerClass"),o=new n(""),p=function(){o.stop()},f=function(e){return Ti.API.debug("data.previewUrl "+e.previewUrl),(o.playing||o.paused)&&p(),o.url=e.previewUrl,o.start()},u=function(){return e.clickPlayFunc()},t.clickPlayFunc=function(){return null!=v?f(v[Math.floor(Math.random()*v.length)]):void 0},l=function(){o.paused?o.start():o.pause()},o.addEventListener("progress",function(t){Ti.API.info("Time Played: "+Math.round(t.progress)+" milliseconds"),Math.round(t.progress)>1e3&&!e.button_view.visible&&!b&&y()}),o.addEventListener("change",function(t){Ti.API.info("State: "+t.description+" ("+t.state+")"),o.STATE_STARTING!==t.state||e.button_view.visible||"undefined"!=typeof pv&&null!==pv&&pv.show({text:"loading"},"loading")}),d=function(){o.stop()},T=null,t.isSeikai=function(e){return null!=e&&(T=e),_.isEqual(m[T.index],w)},t.selectAnswer=function(t){var i,n,r,a;return n=null,n=e.isSeikai(t)?"/se/seikai.wav":"/se/hazure.wav",i=require("MobileCreateSound"),r=new i({url:n}),r.play(),e.artist.text=w.artistName,e.title.text=w.trackName,e.artisgt_image.image=w.artworkUrl100,o.start(),null!=(a=e.hayaoshi_button)&&(a.visible=!1),e.button_view.visible=!0,e.selectAnswerExtends(),b=!1},t.selectAnswerExtends=function(){},a=function(){},y=function(){var t;b||(b=!0,"undefined"!=typeof pv&&null!==pv&&pv.hide(),t=Ti.UI.createAlertDialog({buttonNames:_.pluck(m,"trackName"),title:"Enter text"}),t.addEventListener("click",e.selectAnswer),t.show(),p())},t.clickReplayFunc=function(){var t;return null!=(t=e.hayaoshi_button)&&(t.visible=!0),e.button_view.visible=!1,e.startMusic()},c=function(){return e.clickReplayFunc()},t.startMusic=function(){var t,i;for(m=[],t=i=0;4>i;t=++i)m.push(v[Math.floor(Math.random()*v.length)]);return e.artist.text=e.title.text="",e.artisgt_image.image=Alloy.Globals.NullImage,w=m[Math.floor(Math.random()*m.length)],f(w)},s=function(){return Ti.Platform.openURL(w.trackViewUrl+"&at=11lGpg")},function(){var t;return g(!0),e.win.title=L("Play","Play"),t=require("AppStoreClient/AppStoreClient"),t.getItunesRssDataYql(function(t){return v=t,g(!1),e.startMusic()},h,{term:"AKB48",media:"music",entity:"song",country:require("AppStoreClient/AppStoreClient").getTzOff(),limit:200})}(),i["$.__views.win!close!closeWindow"]&&e.__views.win.addEventListener("close",d),i["$.__views.replay_button!click!clickReplay"]&&e.__views.replay_button.addEventListener("click",c),i["$.__views.itunes_button!click!clickItunes"]&&e.__views.itunes_button.addEventListener("click",s),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;